<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Redis | Couture's Blog</title><noscript>å¼€å¯JavaScriptæ‰èƒ½è®¿é—®æœ¬ç«™å“¦~</noscript><link rel="icon" href="/img/pwa/favicon.ico"><link rel="stylesheet" href="/css/index.css?v=1.7.12"><link rel="stylesheet" href="https://cdn2.codesign.qq.com/icons/7pOrz0WXB5ZWJPX/latest/iconfont.css"><link rel="stylesheet" href="https://cdn.staticfile.net/Swiper/11.0.5/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.staticfile.net/fancyapps-ui/5.0.35/fancybox/fancybox.min.css"><meta name="description" content="[TOC] ä¸€ã€å¼•è¨€ 1.1 æ•°æ®åº“å‹åŠ›è¿‡å¤§ ç”±äºç”¨æˆ·é‡å¢å¤§ï¼Œè¯·æ±‚æ•°é‡ä¹Ÿéšä¹‹å¢å¤§ï¼Œæ•°æ®å‹åŠ›è¿‡å¤§ 1.2 æ•°æ®ä¸åŒæ­¥ å¤šå°æœåŠ¡å™¨ä¹‹é—´ï¼Œæ•°æ®ä¸åŒæ­¥ 1.3 ä¼ ç»Ÿé”å¤±æ•ˆ å¤šå°æœåŠ¡å™¨ä¹‹é—´çš„é”ï¼Œå·²ç»ä¸å­˜åœ¨äº’æ–¥æ€§äº†ã€‚ äºŒã€Redisä»‹ç» 2.1 å…³äºå…³ç³»å‹æ•°æ®åº“å’ŒNOSQLæ•°æ®åº“ï¼ˆé”®å€¼å¯¹å­˜å‚¨"><meta name="theme-color" content="#006a73"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#006a73"><link rel="mask-icon" href="/img/pwa/favicon.ico" color="#006a73"><link rel="apple-touch-icon" sizes="180x180" href="/img/pwa/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/img/pwa/favicon_16.ico"><link rel="icon" type="image/png" sizes="32x32" href="/img/pwa/favicon_32.ico"><link rel="bookmark" href="/img/pwa/favicon.ico"><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}};const t=localStorage.getItem("theme");null!==t&&("dark"===t?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light"));const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside")),e.getCSS=(e,t=!1)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)})),e.getScript=(e,t={})=>new Promise(((o,n)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},Object.keys(t).forEach((e=>{a.setAttribute(e,t[e])})),document.head.appendChild(a)}))})(window),console.log("%c Program: Hexo %c Theme: Solitude %c Version: v1.7.12","border-radius:5px 0 0 5px;padding: 5px 10px;color:white;background:#ff3842;","padding: 5px 10px;color:white;background:#3e9f50;","border-radius:0 5px 5px 0;padding: 5px 10px;background:#0084ff;color:white;")</script><link rel="stylesheet" href="/css/custom.css"><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localsearch:{preload:!1,path:"/search.xml"},runtime:"2020-04-20 00:00:00",lazyload:{enable:!1,error:"/img/error_load.png"},copyright:{limit:50,author:"ä½œè€…: Couture",link:"é“¾æ¥: ",source:"æ¥æº: Couture's Blog",info:"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚ å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"},highlight:{enable:!0,limit:200,expand:!0,copy:!0,syntax:"highlight.js"},randomlink:!1,lang:{theme:{dark:"å·²åˆ‡æ¢è‡³æ·±è‰²æ¨¡å¼",light:"å·²åˆ‡æ¢è‡³æµ…è‰²æ¨¡å¼"},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶å¤±è´¥"},backtop:"è¿”å›é¡¶éƒ¨",time:{day:"å¤©å‰",hour:"å°æ—¶å‰",just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",month:"ä¸ªæœˆå‰"},f12:"å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€ï¼Œè¯·éµå¾ªGPLåè®®ã€‚",totalk:"æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¾“å…¥è¯„è®ºå³å¯",search:{empty:"æ‰¾ä¸åˆ°ä½ æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hit:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’",placeholder:"è¾“å…¥å…³é”®è¯å¿«é€ŸæŸ¥æ‰¾",count:"å…± <b>${count}</b> æ¡ç»“æœã€‚"},barrage:{title:"çƒ­è¯„"}},aside:{sayhello:{morning:"ä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨",noon:"åƒé¥±äº†æ‰æœ‰åŠ›æ°”å¹²æ´»",afternoon:"é›†ä¸­ç²¾åŠ›ï¼Œæ”»å…‹éš¾å…³",night:"ä¸è¦å¤ªåŠ³ç´¯äº†ï¼Œæ—©ç¡æ›´å¥åº·",goodnight:"ç¡ä¸ªå¥½è§‰ï¼Œä¿è¯ç²¾åŠ›å……æ²›"},sayhello2:["ğŸ¤–ï¸"]},covercolor:{enable:!0},comment:{avatar:"https://cravatar.cn",url:"https://avrezaif.lc-cn-n1-shared.com",commentBarrage:!0,appId:"aVReZaifAnr7vskgWFexgbCb-gzGzoHsz",appKey:"1DB6cCOWB3GgFDbDaAzm9Ogc",owo:{body:".vwrap",item:".vemojis i"}},lightbox:"fancybox",post_ai:!1,right_menu:!1}</script><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="Couture's Blog" type="application/atom+xml"></head><body id="body"><canvas id="universe"></canvas><div id="console"><div class="close-btn" onclick="sco.hideConsole()"><i class="solitude st-close-fill"></i></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments" onclick="sco.hideConsole()"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><div class="author-content-item-title">æœ€æ–°è¯„è®º</div></div><div class="aside-list"></div></div></div><div class="console-card-group-right"><div class="console-card tags" onclick="sco.hideConsole()"><div class="card-content"><div class="author-content-item-tips">æ ‡ç­¾</div><div class="author-content-item-title">å¯»æ‰¾æ„Ÿå…´è¶£çš„é¢†åŸŸ</div></div><div class="card-tag-cloud"><a href="/tags/CentOS/">CentOS<sup>2</sup></a><a href="/tags/Docker/">Docker<sup>5</sup></a><a href="/tags/Hexo/">Hexo<sup>2</sup></a><a href="/tags/Mac/">Mac<sup>4</sup></a><a href="/tags/Linux/">Linux<sup>2</sup></a><a href="/tags/Switch/">Switch<sup>3</sup></a><a href="/tags/MySQL/">MySQL<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">ç¯å¢ƒé…ç½®<sup>5</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6%E5%AD%A6%E4%B9%A0/">æ’ä»¶å­¦ä¹ <sup>3</sup></a><a href="/tags/Rocky/">Rocky<sup>1</sup></a><a href="/tags/java/">java<sup>1</sup></a><a href="/tags/Ubuntu/">Ubuntu<sup>5</sup></a><a href="/tags/WinServer/">WinServer<sup>2</sup></a><a href="/tags/Windows-11/">Windows 11<sup>2</sup></a><a href="/tags/Windows/">Windows<sup>6</sup></a><a href="/tags/%E8%BF%90%E7%BB%B4/">è¿ç»´<sup>3</sup></a><a href="/tags/ChatGPT/">ChatGPT<sup>1</sup></a></div></div><div class="console-card history" onclick="sco.hideConsole()"><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2024/03/")' href="javascript:void(0);"><span class="card-archive-list-date">2024/03</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2024/02/")' href="javascript:void(0);"><span class="card-archive-list-date">2024/02</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2024/01/")' href="javascript:void(0);"><span class="card-archive-list-date">2024/01</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/12/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/12</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/11/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/11</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/08/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/08</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/07/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/07</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/06/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/06</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/05/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/05</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/04/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/04</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2023/03/")' href="javascript:void(0);"><span class="card-archive-list-date">2023/03</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/11/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/11</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/10/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/10</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/07/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/07</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/06/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/06</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/05/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/05</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/04/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/04</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" onclick='pjax.loadUrl("/archives/2022/03/")' href="javascript:void(0);"><span class="card-archive-list-date">2022/03</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span class="card-archive-list-count-unit">ç¯‡</span></div></a></li></ul></div></div></div><div class="button-group"><div class="console-btn-item"><span class="darkmode_switchbutton" onclick="sco.switchDarkMode()" title="æ˜¼å¤œåˆ‡æ¢"><i class="solitude st-moon-clear-fill"></i></span></div><div class="console-btn-item" id="consoleHideAside"><span class="asideSwitch" onclick="sco.switchHideAside()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><i class="solitude st-side-bar-fill"></i></span></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="sco.switchCommentBarrage()"><span class="commentBarrage"><i class="solitude st-chat-fill"></i></span></div></div><div class="console-mask" onclick="sco.hideConsole()"></div></div><div id="sidebar" style="zoom:1"><div id="menu-mask" style="display:none"></div><div id="sidebar-menus"><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">53</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">10</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">17</div></a></div></div></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><span class="darkmode_switchbutton menu-child" onclick="sco.switchDarkMode()"><i class="solitude st-moon-clear-fill"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>æ–‡åº“</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="solitude st-folder-fill"></i><span>æ–‡ç« åˆ—è¡¨</span></a></li><li><a class="site-page child" href="/categories/"><i class="solitude st-checkbox-multiple-blank-fill"></i><span>å…¨éƒ¨åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="solitude st-price-tag-fill"></i><span>å…¨éƒ¨æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>å‹é“¾</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/links/"><i class="solitude st-group-fill"></i><span>å‹æƒ…é“¾æ¥</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>å…³äº</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="solitude st-contacts-fill"></i><span>å…³äºæœ¬ç«™</span></a></li></ul></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class="card-tag-cloud"><a href="/tags/CentOS/">CentOS<sup>2</sup></a><a href="/tags/Docker/">Docker<sup>5</sup></a><a href="/tags/Hexo/">Hexo<sup>2</sup></a><a href="/tags/Mac/">Mac<sup>4</sup></a><a href="/tags/Linux/">Linux<sup>2</sup></a><a href="/tags/Switch/">Switch<sup>3</sup></a><a href="/tags/MySQL/">MySQL<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">ç¯å¢ƒé…ç½®<sup>5</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6%E5%AD%A6%E4%B9%A0/">æ’ä»¶å­¦ä¹ <sup>3</sup></a><a href="/tags/Rocky/">Rocky<sup>1</sup></a><a href="/tags/java/">java<sup>1</sup></a><a href="/tags/Ubuntu/">Ubuntu<sup>5</sup></a><a href="/tags/WinServer/">WinServer<sup>2</sup></a><a href="/tags/Windows-11/">Windows 11<sup>2</sup></a><a href="/tags/Windows/">Windows<sup>6</sup></a><a href="/tags/%E8%BF%90%E7%BB%B4/">è¿ç»´<sup>3</sup></a><a href="/tags/ChatGPT/">ChatGPT<sup>1</sup></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav class="show" id="nav"><div id="nav-group"><div id="blog_name"><a id="site-name" href="/" title="è¿”å›åšå®¢ä¸»é¡µ"><span class="title">Couture's Blogs</span></a></div><div id="page-name-mask"><div id="page-name"><a id="page-name-text" onclick="sco.toTop()">Redis</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>æ–‡åº“</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="solitude st-folder-fill"></i><span>æ–‡ç« åˆ—è¡¨</span></a></li><li><a class="site-page child" href="/categories/"><i class="solitude st-checkbox-multiple-blank-fill"></i><span>å…¨éƒ¨åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="solitude st-price-tag-fill"></i><span>å…¨éƒ¨æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>å‹é“¾</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/links/"><i class="solitude st-group-fill"></i><span>å‹æƒ…é“¾æ¥</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>å…³äº</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="solitude st-contacts-fill"></i><span>å…³äºæœ¬ç«™</span></a></li></ul></div></div></div><div id="nav-left"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºä¸€ç¯‡æ–‡ç« " href="javascript:void(0);"><i class="solitude st-signal-tower-fill"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢"><i class="solitude st-search-line"></i></a></div><div class="nav-button" id="nav-console"><a class="console_switchbutton" onclick="sco.showConsole()" title="ä¸­æ§å°" href="javascript:void(0);"><i class="solitude st-dashboard-fill"></i></a></div><div class="nav-button" id="nav-totop" onclick="sco.toTop()"><a class="totopbtn"><i class="solitude st-arrow-up-line"></i><span id="percent">0</span></a></div><script>document.addEventListener("DOMContentLoaded",(()=>{const e=()=>{let t=document.documentElement.scrollTop||window.pageYOffset,o=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(t/o*100),c=document.querySelector("#percent"),d=window.scrollY+document.documentElement.clientHeight,l=o-t;(document.getElementById("post-comment")||document.getElementById("footer")).offsetTop<d||n>90?(document.querySelector("#nav-totop").classList.add("long"),c.innerHTML=GLOBAL_CONFIG.lang.backtop):(document.querySelector("#nav-totop").classList.remove("long"),n>=0&&(c.innerHTML=n+""));let m=document.querySelectorAll(".needEndHide");l<100?m.forEach((function(e){e.classList.add("hide")})):m.forEach((function(e){e.classList.remove("hide")})),window.onscroll=e};e()}))</script><div id="toggle-menu"><a class="site-page"><i class="solitude st-menu-line"></i></a></div></div></div></nav><div class="coverdiv" id="coverdiv"><img class="nolazyload" id="post-cover" src="https://s3.qjqq.cn/50/6615fa2d78f70.webp!color" alt="Redis"></div><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®">åŸåˆ›</a><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8F%92%E4%BB%B6%E5%AD%A6%E4%B9%A0/"><span class="tags-name tags-punctuation">æ’ä»¶å­¦ä¹ </span></a></div></div></div></div><h1 class="post-title">Redis</h1><div id="post-meta"><div class="meta-secondline"><span class="post-meta-date" title="å‘å¸ƒäº 2022-07-05 08:02:39"><i class="post-meta-icon solitude st-calendar-todo-fill"></i><time datetime="2022-07-05T00:02:39.000Z">2022-07-05T00:02:39.000Z</time></span><span class="post-meta-date" title="æœ€åæ›´æ–°äº 2024-04-11 22:09:18"><i class="post-meta-icon solitude st-refresh-line"></i><time datetime="2024-04-11T14:09:18.854Z">2024-04-11T14:09:18.854Z</time></span><span class="post-meta-wordcount"><i class="post-meta-icon solitude st-word-fill" title="æ–‡ç« å­—æ•°"></i><span class="word-count">9.6k</span><span class="post-meta-separator"></span><i class="post-meta-icon solitude st-clock-fill" title="é˜…è¯»è€—æ—¶"></i><span>37 min</span></span><span class="post-meta-position" title="ä½œè€…IPå½’å±åœ°ä¸ºChina"><i class="post-meta-icon solitude st-map-pin-fill"></i><span>China</span></span><a class="post-meta-pv" href="/posts/27273.html" title="æ–‡ç« çƒ­åº¦"><i class="post-meta-icon solitude st-fire-fill"></i><span class="leancloud_visitors" id="/posts/27273.html"><span class="leancloud-visitors-count"><i class="solitude st-loading-line"></i></span></span></a></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238373.jfif" alt="" loading="lazy"></p><span id="more"></span><p>[TOC]</p><h3 id="ä¸€ã€å¼•è¨€"><a class="headerlink" href="#ä¸€ã€å¼•è¨€"></a>ä¸€ã€å¼•è¨€</h3><hr><h4 id="1-1-æ•°æ®åº“å‹åŠ›è¿‡å¤§"><a class="headerlink" href="#1-1-æ•°æ®åº“å‹åŠ›è¿‡å¤§"></a>1.1 æ•°æ®åº“å‹åŠ›è¿‡å¤§</h4><blockquote><p>ç”±äºç”¨æˆ·é‡å¢å¤§ï¼Œè¯·æ±‚æ•°é‡ä¹Ÿéšä¹‹å¢å¤§ï¼Œæ•°æ®å‹åŠ›è¿‡å¤§</p></blockquote><h4 id="1-2-æ•°æ®ä¸åŒæ­¥"><a class="headerlink" href="#1-2-æ•°æ®ä¸åŒæ­¥"></a>1.2 æ•°æ®ä¸åŒæ­¥</h4><blockquote><p>å¤šå°æœåŠ¡å™¨ä¹‹é—´ï¼Œæ•°æ®ä¸åŒæ­¥</p></blockquote><h4 id="1-3-ä¼ ç»Ÿé”å¤±æ•ˆ"><a class="headerlink" href="#1-3-ä¼ ç»Ÿé”å¤±æ•ˆ"></a>1.3 ä¼ ç»Ÿé”å¤±æ•ˆ</h4><blockquote><p>å¤šå°æœåŠ¡å™¨ä¹‹é—´çš„é”ï¼Œå·²ç»ä¸å­˜åœ¨äº’æ–¥æ€§äº†ã€‚</p></blockquote><h3 id="äºŒã€Redisä»‹ç»"><a class="headerlink" href="#äºŒã€Redisä»‹ç»"></a>äºŒã€Redisä»‹ç»</h3><hr><h4 id="2-1-å…³äºå…³ç³»å‹æ•°æ®åº“å’ŒNOSQLæ•°æ®åº“ï¼ˆé”®å€¼å¯¹å­˜å‚¨ï¼‰"><a class="headerlink" href="#2-1-å…³äºå…³ç³»å‹æ•°æ®åº“å’ŒNOSQLæ•°æ®åº“ï¼ˆé”®å€¼å¯¹å­˜å‚¨ï¼‰"></a>2.1 å…³äºå…³ç³»å‹æ•°æ®åº“å’ŒNOSQLæ•°æ®åº“ï¼ˆé”®å€¼å¯¹å­˜å‚¨ï¼‰</h4><blockquote><p>å…³ç³»å‹æ•°æ®åº“æ˜¯åŸºäºå…³ç³»è¡¨çš„æ•°æ®åº“ï¼Œæœ€ç»ˆä¼šå°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œè€Œnosqlæ•°æ®åº“æ˜¯åŸºäºç‰¹æ®Šçš„ç»“æ„ï¼Œå¹¶å°†æ•°æ®å­˜å‚¨åˆ°å†…å­˜çš„æ•°æ®åº“ã€‚ä»æ€§èƒ½ä¸Šè€Œè¨€ï¼Œnosqlæ•°æ®åº“è¦ä¼˜äºå…³ç³»å‹æ•°æ®åº“ï¼Œä»å®‰å…¨æ€§ä¸Šè€Œè¨€å…³ç³»å‹æ•°æ®åº“è¦ä¼˜äºnosqlæ•°æ®åº“ï¼Œæ‰€ä»¥åœ¨å®é™…å¼€å‘ä¸­ä¸€ä¸ªé¡¹ç›®ä¸­nosqlå’Œå…³ç³»å‹æ•°æ®åº“ä¼šä¸€èµ·ä½¿ç”¨ï¼Œè¾¾åˆ°æ€§èƒ½å’Œå®‰å…¨æ€§çš„åŒä¿è¯ã€‚</p><p>NOSQLäº§å“: redisï¼Œmongodbï¼Œmemcachedâ€¦</p></blockquote><blockquote><ul><li>Rediså°±æ˜¯ä¸€æ¬¾NoSQL</li><li>NoSQL -&gt; éå…³ç³»å‹æ•°æ®åº“ -&gt; Not Only SQLã€‚</li><li>Key-Valueï¼šRedis â€¦</li><li>æ–‡æ¡£å‹ï¼šElasticSearchï¼ŒSolrï¼ŒMongodb â€¦</li><li>é¢å‘åˆ—ï¼šHbaseï¼ŒCassandra â€¦</li><li>å›¾å½¢åŒ–ï¼šNeo4j â€¦</li><li>é™¤äº†å…³ç³»å‹æ•°æ®åº“éƒ½æ˜¯éå…³ç³»å‹æ•°æ®åº“</li><li>NoSQLåªæ˜¯ä¸€ç§æ¦‚å¿µï¼Œæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼Œå’Œå…³ç³»å‹æ•°æ®åº“åšä¸€ä¸ªåŒºåˆ†</li></ul></blockquote><h4 id="2-2-Redisä»‹ç»"><a class="headerlink" href="#2-2-Redisä»‹ç»"></a>2.2 Redisä»‹ç»</h4><blockquote><ul><li><p>æœ‰ä¸€ä½æ„å¤§åˆ©äººï¼Œåœ¨å¼€å‘ä¸€æ¬¾LLOOGGçš„ç»Ÿè®¡é¡µé¢ï¼Œå› ä¸ºMySQLçš„æ€§èƒ½ä¸å¥½ï¼Œè‡ªå·±ç ”å‘äº†ä¸€æ¬¾éå…³ç³»å‹æ•°æ®åº“ï¼Œå¹¶å‘½åä¸ºRedisã€‚Salvatoreã€‚</p></li><li><p>Redisï¼ˆRemote Dictionary Serverï¼‰å³è¿œç¨‹å­—å…¸æœåŠ¡ï¼ŒRedisæ˜¯ç”±Cè¯­è¨€å»ç¼–å†™ï¼ŒRedisæ˜¯ä¸€æ¬¾åŸºäºKey-Valueçš„NoSQLï¼Œè€Œä¸”Redisæ˜¯åŸºäºå†…å­˜å­˜å‚¨æ•°æ®çš„ï¼ŒRedisè¿˜æä¾›äº†å¤šç§æŒä¹…åŒ–æœºåˆ¶ï¼Œæ€§èƒ½å¯ä»¥è¾¾åˆ°110000/sè¯»å–æ•°æ®ä»¥åŠ81000/så†™å…¥æ•°æ®ï¼ŒRedisè¿˜æä¾›äº†ä¸»ä»ï¼Œå“¨å…µä»¥åŠé›†ç¾¤çš„æ­å»ºæ–¹å¼ï¼Œå¯ä»¥æ›´æ–¹ä¾¿çš„æ¨ªå‘æ‰©å±•ä»¥åŠå‚ç›´æ‰©å±•ã€‚</p></li></ul></blockquote><table><thead><tr><th style="text-align:center">Redisä¹‹çˆ¶</th></tr></thead><tbody><tr><td style="text-align:center"><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238413.png" alt="1586747559955" loading="lazy"></td></tr></tbody></table><h3 id="ä¸‰ã€Rediså®‰è£…"><a class="headerlink" href="#ä¸‰ã€Rediså®‰è£…"></a>ä¸‰ã€Rediså®‰è£…</h3><hr><h4 id="3-1-å®‰è£…Redis"><a class="headerlink" href="#3-1-å®‰è£…Redis"></a>3.1 å®‰è£…Redis</h4><blockquote><p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://redis.io">https://redis.io</a></p><p>ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="http://download.redis.io/releases">http://download.redis.io/releases</a></p><p>ä¸­æ–‡ç½‘ï¼š<a target="_blank" rel="noopener" href="https://www.redis.net.cn/">https://www.redis.net.cn/</a></p></blockquote><blockquote><p>å®˜ç½‘æä¾›å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼šï¼ˆå®‰è£…redisç¼–è¯‘çš„cç¯å¢ƒï¼Œæ­¤æ­¥éª¤æ²¡æœ‰ç¼–è¯‘ï¼‰</p><p>Installation</p><p>Download, extract and compile Redis with:</p><p>$ wget &lt;<a target="_blank" rel="noopener" href="http://download.redis.io/releases/redis-5.0.5.tar.gz">http://download.redis.io/releases/redis-5.0.5.tar.gz</a> &gt;</p><p>$ tar xzf redis-5.0.5.tar.gz $ cd redis-5.0.5</p><p>$ make</p><p>The binaries that are now compiled are available in the src directory. Run Redis with:</p><p>$ src/redis-server</p><p>You can interact with Redis using the built-in client:</p><p>$ src/redis-cli</p><p>redis&gt; set foo bar</p><p>OK</p><p>redis&gt; get foo</p><p>â€œbarâ€</p></blockquote><h4 id="3-3-å®‰è£…æ­¥éª¤"><a class="headerlink" href="#3-3-å®‰è£…æ­¥éª¤"></a>3.3 å®‰è£…æ­¥éª¤</h4><blockquote><p>1.æŠŠä¸‹è½½å¥½çš„redis-6.2.6.tar.gzå®‰è£…åŒ…æ‹·è´åˆ°å½“å‰è™šæ‹Ÿæœºrootç›®å½•ä¸‹ï¼Œè§£å‹åˆ°/usr/localä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# tar -zxvf redis-6.2.6.tar.gz -C /usr/local</span><br></pre></td></tr></table></figure><p>2.ç¼–è¯‘çš„cç¯å¢ƒï¼Œæ³¨ï¼šå®‰è£…æ—¶å¦‚æœæ˜¾ç¤ºyumæ­£åœ¨è¿è¡Œï¼Œéœ€è¦å…ˆå°†yumè¿›ç¨‹killåå†æ‰§è¡Œè¯¥å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install gcc-c++</span><br></pre></td></tr></table></figure><p>3.è¿›å…¥redis-6.2.6ç›®å½• ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘redisï¼ˆè‹¥æŠ¥é”™ï¼Œå…ˆmake distcleanï¼Œå†makeï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-6.2.6]# make</span><br></pre></td></tr></table></figure><p>4.ä½¿ç”¨make PREFIX=/usr/local/redis-6.2.6 installå‘½ä»¤å®‰è£…ï¼ˆå®‰è£…åä¼šå‡ºç°binç›®å½•ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-6.2.6]# make PREFIX=/usr/local/redis-6.2.6 install</span><br></pre></td></tr></table></figure><p>5.å¯åŠ¨redisæœåŠ¡ç«¯ï¼ˆå‰å°å¯åŠ¨ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-6.2.6]# cd bin</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-server </span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238861.png" alt="" loading="lazy"></p><p>å¯åŠ¨åçœ‹åˆ°å¦‚ä¸Šæ¬¢è¿é¡µé¢ï¼Œä½†æ­¤çª—å£ä¸èƒ½å…³é—­ï¼Œçª—å£å…³é—­å°±è®¤ä¸ºredisä¹Ÿå…³é—­äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åå°å¯åŠ¨ï¼Œç„¶åå†å¯åŠ¨å®¢æˆ·ç«¯è¿›è¡Œè¿æ¥ï¼Œæ‰€ä»¥é¦–å…ˆCtrl+Cé€€å‡ºã€‚</p><p>è§£å†³ï¼šå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶é…ç½®redisçš„åå°å¯åŠ¨ï¼ˆå³æœåŠ¡å™¨å¯åŠ¨äº†ä½†ä¸ä¼šåˆ›å»ºæ§åˆ¶å°çª—å£ï¼‰</p><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1.åˆ‡æ¢åˆ°redis-6.2.6ç›®å½•ä¸‹ï¼ŒæŠŠå½“å‰ç›®å½•ä¸‹çš„redis.confæ–‡ä»¶æ‹·è´åˆ°binç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# cd ../</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-6.2.6]# cp redis.conf bin/redis.conf</span><br></pre></td></tr></table></figure><p>2.åˆ‡æ¢åˆ°binç›®å½•ä¸‹ï¼Œä¿®æ”¹redis.confæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-6.2.6]# cd bin</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# vim redis.conf </span><br></pre></td></tr></table></figure><p>3.å°†redis.confæ–‡ä»¶ä¸­çš„daemonizeçš„å€¼ä»noä¿®æ”¹æˆyesè¡¨ç¤ºåå°å¯åŠ¨</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238640.png" alt="" loading="lazy"></p><p>4.å¯åŠ¨redisæœåŠ¡ç«¯ï¼ˆåå°å¯åŠ¨ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-server redis.conf</span><br></pre></td></tr></table></figure><p>5.æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ps -ef | grep redis</span><br></pre></td></tr></table></figure><p>6.å¯åŠ¨å®¢æˆ·ç«¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-cli</span><br></pre></td></tr></table></figure><p>7.å­˜å–æ•°æ®è¿›è¡Œæµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set name jack</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;jack&quot;</span><br></pre></td></tr></table></figure></blockquote><h4 id="3-4-Redisçš„é…ç½®æ–‡ä»¶"><a class="headerlink" href="#3-4-Redisçš„é…ç½®æ–‡ä»¶"></a>3.4 Redisçš„é…ç½®æ–‡ä»¶</h4><table><thead><tr><th>é…ç½®é¡¹åç§°</th><th>é…ç½®é¡¹å€¼èŒƒå›´</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>daemonize</td><td>yesã€no</td><td>yesè¡¨ç¤ºå¯ç”¨å®ˆæŠ¤è¿›ç¨‹ï¼Œé»˜è®¤æ˜¯noå³ä¸ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œã€‚å…¶ä¸­Windowsç³»ç»Ÿä¸‹ä¸æ”¯æŒå¯ç”¨å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œ</td></tr><tr><td>port</td><td></td><td>æŒ‡å®š Redis ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º 6379</td></tr><tr><td>bind</td><td></td><td>ç»‘å®šçš„ä¸»æœºåœ°å€,å¦‚æœéœ€è¦è®¾ç½®è¿œç¨‹è®¿é—®åˆ™ç›´æ¥å°†è¿™ä¸ªå±æ€§å¤‡æ³¨ä¸‹æˆ–è€…æ”¹ä¸ºbind * å³å¯,è¿™ä¸ªå±æ€§å’Œä¸‹é¢çš„protected-modeæ§åˆ¶äº†æ˜¯å¦å¯ä»¥è¿œç¨‹è®¿é—® ã€‚</td></tr><tr><td>protected-mode</td><td>yes ã€no</td><td>é»˜è®¤æ˜¯yesï¼Œå³å¼€å¯ã€‚è®¾ç½®å¤–éƒ¨ç½‘ç»œè¿æ¥redisæœåŠ¡ï¼Œè®¾ç½®æ–¹å¼å¦‚ä¸‹ï¼š1ã€å…³é—­protected-modeæ¨¡å¼ï¼Œæ­¤æ—¶å¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æ¥è®¿é—®2ã€å¼€å¯protected-modeä¿æŠ¤æ¨¡å¼ï¼Œéœ€é…ç½®bind ipæˆ–è€…è®¾ç½®è®¿é—®å¯†ç </td></tr><tr><td>timeout</td><td>300</td><td>å½“å®¢æˆ·ç«¯é—²ç½®å¤šé•¿æ—¶é—´åå…³é—­è¿æ¥ï¼Œå¦‚æœæŒ‡å®šä¸º 0ï¼Œè¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½</td></tr><tr><td>loglevel</td><td>debugã€verboseã€noticeã€warning</td><td>æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤ä¸º notice</td></tr><tr><td>databases</td><td>16</td><td>è®¾ç½®æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤çš„æ•°æ®åº“æ˜¯0ã€‚æ•´ä¸ªé€šè¿‡å®¢æˆ·ç«¯å·¥å…·å¯ä»¥çœ‹å¾—åˆ°</td></tr><tr><td>rdbcompression</td><td>yesã€no</td><td>æŒ‡å®šå­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸º yesï¼ŒRedis é‡‡ç”¨ LZF å‹ç¼©ï¼Œå¦‚æœä¸ºäº†èŠ‚çœ CPU æ—¶é—´ï¼Œå¯ä»¥å…³é—­è¯¥é€‰é¡¹ï¼Œä½†ä¼šå¯¼è‡´æ•°æ®åº“æ–‡ä»¶å˜çš„å·¨å¤§ã€‚</td></tr><tr><td>dbfilename</td><td>dump.rdb</td><td>æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸º dump.rdb</td></tr><tr><td>dir</td><td></td><td>æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½•</td></tr><tr><td>requirepass</td><td></td><td>è®¾ç½® Redis è¿æ¥å¯†ç ï¼Œå¦‚æœé…ç½®äº†è¿æ¥å¯†ç ï¼Œå®¢æˆ·ç«¯åœ¨è¿æ¥ Redis æ—¶éœ€è¦é€šè¿‡ AUTH<password>å‘½ä»¤æä¾›å¯†ç ï¼Œé»˜è®¤å…³é—­</password></td></tr><tr><td>maxclients</td><td>0</td><td>è®¾ç½®åŒä¸€æ—¶é—´æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ï¼ŒRedis å¯ä»¥åŒæ—¶æ‰“å¼€çš„å®¢æˆ·ç«¯è¿æ¥æ•°ä¸º Redis è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°ï¼Œå¦‚æœè®¾ç½® maxclients 0ï¼Œè¡¨ç¤ºä¸ä½œé™åˆ¶ã€‚å½“å®¢æˆ·ç«¯è¿æ¥æ•°åˆ°è¾¾é™åˆ¶æ—¶ï¼ŒRedis ä¼šå…³é—­æ–°çš„è¿æ¥å¹¶å‘å®¢æˆ·ç«¯è¿”å› max number of clients reached é”™è¯¯ä¿¡æ¯ã€‚</td></tr><tr><td>maxmemory</td><td>XXX<bytes></bytes></td><td>æŒ‡å®š Redis æœ€å¤§å†…å­˜é™åˆ¶ï¼ŒRedis åœ¨å¯åŠ¨æ—¶ä¼šæŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¾¾åˆ°æœ€å¤§å†…å­˜åï¼ŒRedis ä¼šå…ˆå°è¯•æ¸…é™¤å·²åˆ°æœŸæˆ–å³å°†åˆ°æœŸçš„ Keyï¼Œå½“æ­¤æ–¹æ³•å¤„ç† åï¼Œä»ç„¶åˆ°è¾¾æœ€å¤§å†…å­˜è®¾ç½®ï¼Œå°†æ— æ³•å†è¿›è¡Œå†™å…¥æ“ä½œï¼Œä½†ä»ç„¶å¯ä»¥è¿›è¡Œè¯»å–æ“ä½œã€‚Redis æ–°çš„ vm æœºåˆ¶ï¼Œä¼šæŠŠ Key å­˜æ”¾å†…å­˜ï¼ŒValue ä¼šå­˜æ”¾åœ¨ swap åŒºã€‚é…ç½®é¡¹å€¼èŒƒå›´åˆ—é‡ŒXXXä¸ºæ•°å€¼ã€‚</td></tr></tbody></table><h3 id="å››ã€redis-benchmarkå®˜æ–¹è‡ªå¸¦çš„æ€§èƒ½æµ‹è¯•å·¥å…·"><a class="headerlink" href="#å››ã€redis-benchmarkå®˜æ–¹è‡ªå¸¦çš„æ€§èƒ½æµ‹è¯•å·¥å…·"></a>å››ã€redis-benchmarkå®˜æ–¹è‡ªå¸¦çš„æ€§èƒ½æµ‹è¯•å·¥å…·</h3><hr><h4 id="4-1-åœ¨å®‰è£…çš„redisä¸­å¯ä»¥çœ‹åˆ°redis-benchmark"><a class="headerlink" href="#4-1-åœ¨å®‰è£…çš„redisä¸­å¯ä»¥çœ‹åˆ°redis-benchmark"></a>4.1 åœ¨å®‰è£…çš„redisä¸­å¯ä»¥çœ‹åˆ°redis-benchmark</h4><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238733.png" alt="" loading="lazy"></p><h4 id="4-2-å…³äºredis-benchmark-çš„ä¸€äº›å‚æ•°"><a class="headerlink" href="#4-2-å…³äºredis-benchmark-çš„ä¸€äº›å‚æ•°"></a>4.2 å…³äºredis-benchmark çš„ä¸€äº›å‚æ•°</h4><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238626.png" alt="" loading="lazy"></p><blockquote><p>æµ‹è¯•ï¼š100ä¸ªå¹¶å‘ï¼Œåä¸‡ä¸ªè¯·æ±‚ï¼Œå•æœºæµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-benchmark -h 127.0.0.1 -p 6379 -c 100 -n 100000</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238323.png" alt="" loading="lazy"></p><p>====== SET ======<br>100000 requests completed in 0.94 seconds è¡¨ç¤ºå¯¹åä¸‡ä¸ªè¯·æ±‚è¿›è¡Œå†™å…¥æµ‹è¯•<br>100 parallel clients 100ä¸ªå¹¶å‘å®¢æˆ·ç«¯<br>3 bytes payload æ¯æ¬¡å†™å…¥3ä¸ªå­—èŠ‚<br>keep alive: 1 åªæœ‰ä¸€å°æœåŠ¡å™¨å¤„ç†è¯·æ±‚<br>host configuration â€œsaveâ€: 3600 1 300 100 60 10000 RDBæŒä¹…åŒ–æ–¹å¼é»˜è®¤å¼€å¯çš„è§„åˆ™<br>host configuration â€œappendonlyâ€: no AOFæŒä¹…åŒ–æ–¹å¼æœªå¼€å¯<br>multi-thread: no å¤šçº¿ç¨‹æœªå¼€å¯</p><p>99.998% &lt;= 12.559 milliseconds (cumulative count 99999)<br>99.999% &lt;= 12.567 milliseconds (cumulative count 100000)<br>100.000% &lt;= 12.567 milliseconds (cumulative count 100000) è¯·æ±‚åœ¨å¤šå°‘æ¯«ç§’å¤„ç†å®Œæˆ</p><p>throughput summary: 106837.61 requests per second æ¯ç§’å¤„ç†è¯·æ±‚æ•°</p></blockquote><blockquote><p>å¦ä¸€ç§å†™æ³•ï¼š</p><p>åªæµ‹è¯• set å’Œ get å‘½ä»¤åé€€å‡º</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-benchmark -h 127.0.0.1 -p 6379 -t set,get -n 10000 -q</span><br></pre></td></tr></table></figure><h3 id="äº”ã€Redisçš„æ•°æ®ç±»å‹ã€é‡ç‚¹ã€‘"><a class="headerlink" href="#äº”ã€Redisçš„æ•°æ®ç±»å‹ã€é‡ç‚¹ã€‘"></a>äº”ã€Redisçš„æ•°æ®ç±»å‹ã€é‡ç‚¹ã€‘</h3><hr><blockquote><p>å¸¸ç”¨çš„5ç§æ•°æ®ç»“æ„ï¼š</p><ul><li>key-stringï¼šä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªå€¼ã€‚</li><li>key-hashï¼šä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªMapã€‚</li><li>key-listï¼šä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªåˆ—è¡¨ã€‚</li><li>key-setï¼šä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªé›†åˆã€‚</li><li>key-zsetï¼šä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªæœ‰åºçš„é›†åˆã€‚</li></ul><p>å¦å¤–ä¸‰ç§æ•°æ®ç»“æ„ï¼š</p><ul><li>HyperLogLogï¼šè®¡ç®—è¿‘ä¼¼å€¼çš„ã€‚</li><li>GEOï¼šåœ°ç†ä½ç½®ã€‚</li><li>BITï¼šä¸€èˆ¬å­˜å‚¨çš„ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­˜å‚¨çš„æ˜¯ä¸€ä¸ªbyte[]ã€‚</li></ul><p>redisæ˜¯ä¸€ç§é«˜çº§çš„key-valueçš„å­˜å‚¨ç³»ç»Ÿï¼Œå…¶ä¸­çš„keyæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå°½å¯èƒ½æ»¡è¶³å¦‚ä¸‹å‡ ç‚¹ï¼š</p><p>1.keyä¸è¦å¤ªé•¿ï¼Œæœ€å¥½ä¸è¦æ“ä½œ1024ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ä»…ä¼šæ¶ˆè€—å†…å­˜è¿˜ä¼šé™ä½æŸ¥æ‰¾æ•ˆç‡</p><p>2.keyä¸è¦å¤ªçŸ­ï¼Œå¦‚æœå¤ªçŸ­ä¼šé™ä½keyçš„å¯è¯»æ€§</p><p>3.åœ¨é¡¹ç›®ä¸­ï¼Œkeyæœ€å¥½æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å‘½åè§„èŒƒï¼ˆæ ¹æ®ä¼ä¸šçš„éœ€æ±‚ï¼‰</p><p>valueæœ€å¸¸ç”¨çš„äº”ç§æ•°æ®ç±»å‹ï¼š</p><p>1.å­—ç¬¦ä¸²(String)ï¼šæœ€å¸¸ç”¨çš„ï¼Œä¸€èˆ¬ç”¨äºå­˜å‚¨ä¸€ä¸ªå€¼</p><p>2.åˆ—è¡¨(List)ï¼šä½¿ç”¨listç»“æ„å®ç°æ ˆå’Œé˜Ÿåˆ—ç»“æ„</p><p>3.é›†åˆ(Set) ï¼šäº¤é›†ï¼Œå·®é›†å’Œå¹¶é›†çš„æ“ä½œ</p><p>4.æœ‰åºé›†åˆ(sorted set) ï¼šæ’è¡Œæ¦œï¼Œç§¯åˆ†å­˜å‚¨ç­‰æ“ä½œ</p><p>5.å“ˆå¸Œ(Hash)ï¼šå­˜å‚¨ä¸€ä¸ªå¯¹è±¡æ•°æ®çš„</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238255.png" alt="" loading="lazy"></p><h4 id="5-1-å­—ç¬¦ä¸²-String"><a class="headerlink" href="#5-1-å­—ç¬¦ä¸²-String"></a>5.1 å­—ç¬¦ä¸²(String)</h4><blockquote><p>set key valueï¼šè®¾å®škeyæŒæœ‰æŒ‡å®šçš„å­—ç¬¦ä¸²valueï¼Œå¦‚æœè¯¥keyå­˜åœ¨åˆ™è¿›è¡Œè¦†ç›–æ“ä½œï¼Œæ€»æ˜¯è¿”å›&quot;OK&quot;</p><p>get keyï¼šè·å–keyçš„valueã€‚å¦‚æœä¸è¯¥keyå…³è”çš„valueä¸æ˜¯Stringç±»å‹ï¼Œrediså°†è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå› ä¸ºgetå‘½ä»¤åªèƒ½ç”¨äºè·å–String valueï¼Œå¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œè¿”å›null</p><p>setex key seconds valueï¼šè®¾ç½®keyä»¥åŠå¯¹åº”çš„valueï¼Œè¿˜å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´</p><p>setnx key valueï¼šå½“keyä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®å¯¹åº”çš„valueï¼Œå½“keyå­˜åœ¨æ—¶ï¼Œä¸åšä»»ä½•æ“ä½œ</p><p>incr keyï¼šå°†æŒ‡å®šçš„keyçš„valueåŸå­æ€§çš„é€’å¢1.å¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œå…¶åˆå§‹å€¼ä¸º0ï¼Œåœ¨incrä¹‹åå…¶å€¼ä¸º1ã€‚å¦‚æœvalueçš„å€¼ä¸èƒ½è½¬æˆæ•´å‹ï¼Œå¦‚helloï¼Œè¯¥æ“ä½œå°†æ‰§è¡Œå¤±è´¥å¹¶è¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>decr keyï¼šå°†æŒ‡å®šçš„keyçš„valueåŸå­æ€§çš„é€’å‡1.å¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œå…¶åˆå§‹å€¼ä¸º0ï¼Œåœ¨incrä¹‹åå…¶å€¼ä¸º-1ã€‚å¦‚æœvalueçš„å€¼ä¸èƒ½è½¬æˆæ•´å‹ï¼Œå¦‚helloï¼Œè¯¥æ“ä½œå°†æ‰§è¡Œå¤±è´¥å¹¶è¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>incrby key incrementï¼šå°†æŒ‡å®šçš„keyçš„valueåŸå­æ€§å¢åŠ incrementï¼Œå¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œå™¨åˆå§‹å€¼ä¸º0ï¼Œåœ¨incrbyä¹‹åï¼Œè¯¥å€¼ä¸ºincrementã€‚å¦‚æœè¯¥å€¼ä¸èƒ½è½¬æˆæ•´å‹ï¼Œå¦‚helloåˆ™å¤±è´¥å¹¶è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p><p>decrby key decrementï¼šå°†æŒ‡å®šçš„keyçš„valueåŸå­æ€§å‡å°‘decrementï¼Œå¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œå™¨åˆå§‹å€¼ä¸º0ï¼Œåœ¨decrbyä¹‹åï¼Œè¯¥å€¼ä¸ºdecrementã€‚å¦‚æœè¯¥å€¼ä¸èƒ½è½¬æˆæ•´å‹ï¼Œå¦‚helloåˆ™å¤±è´¥å¹¶è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p></blockquote><blockquote><p>ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p></blockquote><blockquote><p>1.ç®€å•çš„ç¼“å­˜å­˜å‚¨ï¼ˆæœ€å¸¸ç”¨ï¼‰</p><p>2.æ¶ˆæ¯çš„å¤±æ•ˆæ€§ï¼ˆè¿‡æœŸæ—¶é—´çš„è®¾ç½®ï¼‰</p><p>3.åˆ†å¸ƒå¼é”çš„å®ç°ï¼ˆredissonï¼‰</p></blockquote><h4 id="5-2-åˆ—è¡¨-List"><a class="headerlink" href="#5-2-åˆ—è¡¨-List"></a>5.2 åˆ—è¡¨(List)</h4><blockquote><p>lpush key value1 value2â€¦ï¼šåœ¨æŒ‡å®šçš„keyæ‰€å…³è”çš„listçš„å¤´éƒ¨æ’å…¥æ‰€æœ‰çš„valuesï¼Œå¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œè¯¥å‘½ä»¤åœ¨æ’å…¥çš„ä¹‹å‰åˆ›å»ºä¸€ä¸ªä¸è¯¥keyå…³è”çš„ç©ºé“¾è¡¨ï¼Œä¹‹åå†å‘è¯¥é“¾è¡¨çš„å¤´éƒ¨æ’å…¥æ•°æ®ã€‚æ’å…¥æˆåŠŸï¼Œè¿”å›å…ƒç´ çš„ä¸ªæ•°ã€‚</p><p>rpush key value1 value2â€¦ï¼šåœ¨è¯¥listçš„å°¾éƒ¨æ·»åŠ å…ƒç´ ã€‚</p><p>lrange key start endï¼šè·å–é“¾è¡¨ä¸­ä»startåˆ°endçš„å…ƒç´ çš„å€¼ï¼Œstartã€endå¯ä¸ºè´Ÿæ•°ï¼Œè‹¥ä¸º-1åˆ™è¡¨ç¤ºé“¾è¡¨å°¾éƒ¨çš„å…ƒç´ ï¼Œ-2åˆ™è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªï¼Œä¾æ¬¡ç±»æ¨â€¦.</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238502.png" alt="" loading="lazy"></p><p>lpop keyï¼šè¿”å›å¹¶å¼¹å‡ºæŒ‡å®šçš„keyå…³è”çš„é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³å¤´éƒ¨å…ƒç´ ã€‚</p><p>rpop keyï¼šä»å°¾éƒ¨å¼¹å‡ºå…ƒç´ ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071238251.png" alt="" loading="lazy"></p><p>llen keyï¼šè¿”å›æŒ‡å®šçš„keyå…³è”çš„é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ•°é‡ã€‚</p></blockquote><blockquote><p>ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p></blockquote><blockquote><p>æ¶ˆæ¯æµçš„åœºæ™¯ï¼š</p><p>1.ç”¨æˆ·çš„idä½œä¸ºkeyï¼Œå‘é€çš„æ¶ˆæ¯ä½œä¸ºvalueï¼Œä¾‹å¦‚ï¼šæœ‹å‹åœˆå‘å¸ƒï¼Œå¾®åšå‘å¸ƒï¼Œå…¬ä¼—å·å‘å¸ƒâ€¦</p></blockquote><h4 id="5-3-é›†åˆ-Setï¼Œä¸å…è®¸å‡ºç°é‡å¤çš„å…ƒç´ "><a class="headerlink" href="#5-3-é›†åˆ-Setï¼Œä¸å…è®¸å‡ºç°é‡å¤çš„å…ƒç´ "></a>5.3 é›†åˆ(Setï¼Œä¸å…è®¸å‡ºç°é‡å¤çš„å…ƒç´ )</h4><blockquote><p>sadd key value1 value2â€¦ï¼šå‘setä¸­æ·»åŠ æ•°æ®ï¼Œå¦‚æœè¯¥keyçš„å€¼å·²æœ‰åˆ™ä¸ä¼šé‡å¤æ·»åŠ ã€‚</p><p>smembers keyï¼šè·å–setä¸­æ‰€æœ‰çš„æˆå‘˜ã€‚</p><p>scard keyï¼šè·å–setä¸­æˆå‘˜çš„æ•°é‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239420.png" alt="" loading="lazy"></p><p>sismember key memberï¼šåˆ¤æ–­å‚æ•°ä¸­æŒ‡å®šçš„æˆå‘˜æ˜¯å¦åœ¨è¯¥setä¸­ï¼Œ1è¡¨ç¤ºå­˜åœ¨ï¼Œ0è¡¨ç¤ºä¸å­˜åœ¨æˆ–è€…è¯¥keyæœ¬èº«å°±ä¸å­˜åœ¨ã€‚</p><p>srem key member1 member2â€¦ ï¼šåˆ é™¤setä¸­æŒ‡å®šçš„æˆå‘˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239230.png" alt="" loading="lazy"></p><p>srandmember keyï¼šéšæœºè¿”å›setä¸­çš„ä¸€ä¸ªæˆå‘˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239870.png" alt="" loading="lazy"></p><p>spop keyï¼šéšæœºè¿”å›setä¸­çš„ä¸€ä¸ªæˆå‘˜å¹¶ä»setä¸­ç§»é™¤ã€‚</p><p>sdiff key1 key2ï¼šè¿”å›key1ä¸key2ä¸­ç›¸å·®çš„æˆå‘˜ï¼Œè€Œä¸”ä¸keyçš„é¡ºåºæœ‰å…³ï¼Œå³è¿”å›å·®é›†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239621.png" alt="" loading="lazy"></p><p>sdiffstore destination key1 key2ï¼šå°†key1ã€key2ç›¸å·®çš„æˆå‘˜å­˜å‚¨åœ¨destinationä¸Šã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239477.png" alt="" loading="lazy"></p><p>sinter key[key1,key2â€¦]ï¼šè¿”å›äº¤é›†ã€‚</p><p>sinterstore destination key1 key2ï¼šå°†è¿”å›çš„äº¤é›†å­˜å‚¨åœ¨destinationä¸Šã€‚</p><p><img src="E:/notes/Day75-Redis/1.%E8%AF%BE%E4%BB%B6/34.redis/01.%E8%AF%BE%E4%BB%B6/Pictures/18.png" alt="" loading="lazy"></p><p>sunion key1 key2ï¼šè¿”å›å¹¶é›†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239623.png" alt="" loading="lazy"></p><p>sunionstore destination key1 key2ï¼šå°†è¿”å›çš„å¹¶é›†å­˜å‚¨åœ¨destinationä¸Š</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239546.png" alt="" loading="lazy"></p></blockquote><blockquote><p>ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p></blockquote><blockquote><p>å…¬å¸å¹´ä¼šï¼ŒéšæœºæŠ½å¥–å°ç¨‹åº</p><p>1.æŠŠæ‰€æœ‰ç”¨æˆ·ç»Ÿä¸€å­˜å…¥seté›†åˆä¸­</p><p>2.æŸ¥çœ‹æ‰€æœ‰æŠ½å¥–äººæ•°</p><p>3.éšæœºæŠ½å–æŒ‡å®šå¾—å¥–äººæ•°å¹¶ä»seté›†åˆä¸­åˆ é™¤</p><p>å®ç°ï¼š</p><p>1.sadd choujiang userid1,userid2,userid3â€¦</p><p>2.smembers choujiang</p><p>3.spop choujiang [count]</p></blockquote><blockquote><p>å¾®ä¿¡ç‚¹èµï¼Œå¾®åšæ”¶è—</p><p>1.ç‚¹èµï¼Œåˆ›å»ºé›†åˆå¹¶åŠ å…¥å¯¹åº”ç”¨æˆ·</p><p>2.å–æ¶ˆç‚¹èµï¼Œä»é›†åˆä¸­åˆ é™¤å¯¹åº”ç”¨æˆ·</p><p>3.æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç‚¹è¿‡èµ</p><p>4.è·å–ç‚¹èµç”¨æˆ·åˆ—è¡¨</p><p>5.è·å–ç‚¹èµç”¨æˆ·æ•°é‡</p><p>å®ç°ï¼š</p><p>1.sadd dianzan userid1,userid2,userid3â€¦</p><p>2.srem dianzan userid1</p><p>3.sismember dianzan userid1</p><p>4.smembers dianzan</p><p>5.scard dianzan</p></blockquote><blockquote><p>å¯èƒ½è®¤è¯†çš„äººæ¨è</p><p>1.ä¸¤ä¸ªé›†åˆå–äº¤é›†</p><p>å®ç°ï¼š</p><p>1.sinter user1list,user2listâ€¦</p><p>2.sinterstore list user1list,user2listâ€¦</p></blockquote><h4 id="5-4-æœ‰åºé›†åˆ-sorted-set"><a class="headerlink" href="#5-4-æœ‰åºé›†åˆ-sorted-set"></a>5.4 æœ‰åºé›†åˆ(sorted set)</h4><blockquote><p>zadd key score member score2 member2 â€¦ ï¼šå°†æ‰€æœ‰æˆå‘˜ä»¥åŠè¯¥æˆå‘˜çš„åˆ†æ•°å­˜æ”¾åˆ°sorted-setä¸­ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239166.png" alt="" loading="lazy"></p><p>zcard keyï¼šè·å–é›†åˆä¸­çš„æˆå‘˜æ•°é‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239334.png" alt="" loading="lazy"></p><p>zcount key min maxï¼šè·å–åˆ†æ•°åœ¨[min,max]ä¹‹é—´çš„æˆå‘˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239837.png" alt="" loading="lazy"></p><p>zincrby key increment memberï¼šè®¾ç½®æŒ‡å®šæˆå‘˜çš„å¢åŠ çš„åˆ†æ•°ã€‚</p><p>zrangebyscore key min max [withscores] [limit offset count]ï¼šè¿”å›åˆ†æ•°åœ¨[min,max]çš„æˆå‘˜å¹¶æŒ‰ç…§åˆ†æ•°ä»ä½åˆ°é«˜æ’åºã€‚[withscores]ï¼šæ˜¾ç¤ºåˆ†æ•°ï¼›[limit offset count]ï¼šoffsetï¼Œè¡¨æ˜ä»è„šæ ‡ä¸ºoffsetçš„å…ƒç´ å¼€å§‹å¹¶è¿”å›countä¸ªæˆå‘˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239543.png" alt="" loading="lazy"></p><p>zrevrangebyscore key min max [withscores] [limit offset count]ï¼šä¸Šé¢ç±»ä¼¼ï¼ˆscoreéœ€ä»å¤§åˆ°å°ï¼‰ï¼Œä»é«˜åˆ°åº•æ’åº</p></blockquote><blockquote><p>ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p></blockquote><blockquote><p>æ’è¡Œæ¦œå®ç°</p><p>1.å¯¹æ’­æ”¾çš„è§†é¢‘ï¼Œåˆ†æ•°è‡ªå¢1</p><p>2.å±•ç¤ºæ’è¡Œæ¦œå‰åçš„è§†é¢‘</p><p>å®ç°ï¼š</p><p>1.zincrby videos 1 video1id</p><p>2.zrevrangebyscore videos 100 0 withscores limit 0 10 ï¼ˆzrevrangebyscoreä»å¤§åˆ°å°æ’åºï¼‰</p></blockquote><h4 id="5-5-å“ˆå¸Œ-Hash"><a class="headerlink" href="#5-5-å“ˆå¸Œ-Hash"></a>5.5 å“ˆå¸Œ(Hash)</h4><blockquote><p>hset key field valueï¼šä¸ºæŒ‡å®šçš„keyè®¾å®šfield/valueå¯¹ï¼ˆé”®å€¼å¯¹ï¼‰ã€‚</p><p>hget key fieldï¼šè¿”å›æŒ‡å®šçš„keyä¸­çš„fieldçš„å€¼ã€‚</p><p>hgetall keyï¼šè·å–keyä¸­çš„æ‰€æœ‰filed-vauleã€‚</p><p>hlen keyï¼šè·å–keyæ‰€åŒ…å«çš„fieldçš„æ•°é‡ã€‚</p><p>hincrby key field incrementï¼šè®¾ç½®keyä¸­filedçš„å€¼å¢åŠ increment</p><p>hdel key field [field â€¦]ï¼šåˆ é™¤keyä¸­çš„å±æ€§</p></blockquote><blockquote><p>ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p></blockquote><blockquote><p>è´­ç‰©è½¦åœºæ™¯ï¼š</p><p>1.ç”¨æˆ·çš„idä½œä¸ºkey</p><p>2.å•†å“çš„idä½œä¸ºfieldï¼ˆå±æ€§ï¼‰</p><p>3.å•†å“çš„æ•°é‡ä½œä¸ºvalueï¼ˆå±æ€§å€¼ï¼‰</p><p>è´­ç‰©è½¦æ“ä½œï¼š</p><p>1.ç”¨æˆ·æ·»åŠ è´­ç‰©è½¦ï¼šhset cart:1001 20001 1 ï¼ˆidä¸º1001çš„ç”¨æˆ·æ·»åŠ äº†ä¸€ä¸ªidä¸º20001çš„å•†å“ï¼Œæ•°é‡ä¸º1ä¸ªï¼‰</p><p>2.å¢åŠ å¯¹åº”å•†å“æ•°é‡ï¼šhincrby cart:1001 20001 1</p><p>3.æŸ¥è¯¢å•†å“æ€»æ•°ï¼šhlen cart:1001</p><p>4.åˆ é™¤è¯¥ç”¨æˆ·çš„æŸä¸ªå•†å“ï¼šhdel cart:1001 20001</p><p>5.æŸ¥è¯¢è¯¥ç”¨æˆ·è´­ç‰©è½¦ä¿¡æ¯ï¼šhgetall cart:1001</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071239965.png" alt="" loading="lazy"></p><h4 id="5-6-é€šç”¨æ“ä½œ"><a class="headerlink" href="#5-6-é€šç”¨æ“ä½œ"></a>5.6 é€šç”¨æ“ä½œ</h4><blockquote><p>keys pattenï¼šè·å–æ‰€æœ‰ä¸pattenåŒ¹é…çš„keyï¼Œ*è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œ?è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p><p>del key1 key2â€¦ï¼šåˆ é™¤æŒ‡å®šçš„keyã€‚</p><p>exists keyï¼šåˆ¤æ–­è¯¥keyæ˜¯å¦å­˜åœ¨ï¼Œ1è¡¨ç¤ºå­˜åœ¨ï¼Œ0è¡¨ç¤ºä¸å­˜åœ¨ã€‚</p><p>expire key secondï¼šä¸ºå½“å‰keyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚</p><p>ttl keyï¼šæŸ¥çœ‹å½“å‰keyå‰©ä½™è¿‡æœŸæ—¶é—´ã€‚</p><p>flushall: åˆ é™¤æ‰€æœ‰keyï¼ˆæ…ç”¨ï¼‰</p><p>flushdb: åˆ é™¤æ‰€æœ‰keyï¼ˆæ…ç”¨ï¼‰</p></blockquote><h3 id="å…­ã€Jedisçš„ä½¿ç”¨ã€é‡ç‚¹ã€‘"><a class="headerlink" href="#å…­ã€Jedisçš„ä½¿ç”¨ã€é‡ç‚¹ã€‘"></a>å…­ã€Jedisçš„ä½¿ç”¨ã€é‡ç‚¹ã€‘</h3><hr><blockquote><p>1.ä¿®æ”¹/usr/local/redis-5.0.4/binç›®å½•ä¸‹çš„redis.confé…ç½®æ–‡ä»¶ï¼Œç„¶åå¯åŠ¨redisæœåŠ¡ç«¯</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240709.png" alt="" loading="lazy"></p><p>ä¿®æ”¹redis.confæ–‡ä»¶ä¸­çš„bindä¸ºï¼š0.0.0.0ï¼Œç„¶åæŠŠä¿æŠ¤æ¨¡å¼å…³æ‰</p></blockquote><blockquote><p>å¦‚éœ€è®¾ç½®å¯†ç ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p><p>æ–¹å¼ä¸€ï¼šé€šè¿‡ä¿®æ”¹ redis.conf æ–‡ä»¶ï¼Œè®¾ç½®Redisçš„å¯†ç æ ¡éªŒ</p><p>requirepass å¯†ç </p><p>æ–¹å¼äºŒï¼šåœ¨ä¸ä¿®æ”¹ redis.conf æ–‡ä»¶çš„å‰æä¸‹ï¼Œåœ¨ç¬¬ä¸€æ¬¡é“¾æ¥Redisæ—¶ï¼Œè¾“å…¥å‘½ä»¤ï¼šConfig set requirepass å¯†ç </p><p>åç»­è¿æ¥rediså®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œéœ€è¦å…ˆ AUTH åšä¸€ä¸‹æ ¡éªŒ</p><p>127.0.0.1:6379&gt; auth å¯†ç </p></blockquote><blockquote><p>2.åˆ›å»ºMavenå·¥ç¨‹ï¼Œå¯¼å…¥ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- jediså®¢æˆ·ç«¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>3.ç¼–å†™å®ä½“ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>4.ç¼–å†™æµ‹è¯•ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson2.JSON;</span><br><span class="line"><span class="keyword">import</span> com.qf.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//è·å–å®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.126.129&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//å¦‚æœæœ‰å¯†ç ï¼Œå¿…é¡»è®¾ç½®</span></span><br><span class="line">        <span class="comment">//jedis.auth(&quot;root&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å­˜å‚¨Stringç±»å‹æ•°æ®</span></span><br><span class="line">        jedis.set(<span class="string">&quot;content&quot;</span>,<span class="string">&quot;java2203&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å–Stringå€¼</span></span><br><span class="line">        System.out.println(jedis.get(<span class="string">&quot;content&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å­˜å¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">1</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">userJson</span> <span class="operator">=</span> JSON.toJSONString(user);</span><br><span class="line">        jedis.set(<span class="string">&quot;user&quot;</span>,userJson);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å–å¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonStringUser</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        System.out.println(jsonStringUser);</span><br><span class="line">        <span class="type">User</span> <span class="variable">db_user</span> <span class="operator">=</span> JSON.parseObject(jsonStringUser, User.class);</span><br><span class="line">        System.out.println(db_user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­</span></span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡æ± æ‹¿jediså¯¹è±¡</span></span><br><span class="line">        <span class="comment">//é…ç½®ä¸€äº›å‚æ•°</span></span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">jedisPoolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        <span class="comment">//é…ç½®å‚æ•°</span></span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">200</span>);<span class="comment">//æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">20</span>);<span class="comment">//æœ€å¤§ç©ºé—²</span></span><br><span class="line">        jedisPoolConfig.setMinIdle(<span class="number">1</span>);<span class="comment">//æœ€å°ç©ºé—²</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºJedisPoolå¯¹è±¡</span></span><br><span class="line">        <span class="type">JedisPool</span> <span class="variable">jedisPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(jedisPoolConfig,<span class="string">&quot;192.168.126.129&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//è·å–jediså¯¹è±¡</span></span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">        <span class="comment">//å¦‚æœæœ‰å¯†ç ï¼Œå¿…é¡»è®¾ç½®</span></span><br><span class="line">        <span class="comment">//jedis.auth(&quot;root&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ“ä½œListé›†åˆ</span></span><br><span class="line">        jedis.lpush(<span class="string">&quot;sina001&quot;</span>,<span class="string">&quot;ä»Šå¤©ä¸­åˆåƒä»€ä¹ˆï¼Ÿ&quot;</span>,<span class="string">&quot;ä»Šå¤©æ™šä¸Šå–ä»€ä¹ˆ&quot;</span>);</span><br><span class="line">        System.out.println(jedis.lrange(<span class="string">&quot;sina001&quot;</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ“ä½œSeté›†åˆ</span></span><br><span class="line">        jedis.sadd(<span class="string">&quot;userList&quot;</span>,<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;rose&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        System.out.println(jedis.smembers(<span class="string">&quot;userList&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ‰åºSetä»¥åŠHash</span></span><br><span class="line">        <span class="comment">//....</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­</span></span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸ƒã€Redisä¸­çš„äº‹åŠ¡ã€äº†è§£ã€‘"><a class="headerlink" href="#ä¸ƒã€Redisä¸­çš„äº‹åŠ¡ã€äº†è§£ã€‘"></a>ä¸ƒã€Redisä¸­çš„äº‹åŠ¡ã€äº†è§£ã€‘</h3><hr><blockquote><p>Redisä¸­çš„äº‹åŠ¡å’ŒMySQLä¸­çš„äº‹åŠ¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼ŒRedisä¸­çš„äº‹åŠ¡æ˜¯ä¸€ä¸ªå•ç‹¬çš„éš”ç¦»æ“ä½œï¼Œäº‹åŠ¡ä¸­æ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘æ¥çš„å‘½ä»¤æ‰€æ‰“æ–­ï¼Œå› ä¸ºRedisæœåŠ¡ç«¯æ˜¯ä¸ªå•çº¿ç¨‹çš„æ¶æ„ï¼Œä¸åŒçš„Clientè™½ç„¶çœ‹ä¼¼å¯ä»¥åŒæ—¶ä¿æŒè¿æ¥ï¼Œä½†å‘å‡ºå»çš„å‘½ä»¤æ˜¯åºåˆ—åŒ–æ‰§è¡Œçš„ï¼Œè¿™åœ¨é€šå¸¸çš„æ•°æ®åº“ç†è®ºä¸‹æ˜¯æœ€é«˜çº§åˆ«çš„éš”ç¦»ã€‚</p><p>Redisä¸­çš„äº‹åŠ¡çš„ä½œç”¨å°±æ˜¯ä¸²è”å¤šä¸ªå‘½ä»¤ï¼Œé˜²æ­¢åˆ«çš„å‘½ä»¤æ’é˜Ÿã€‚</p><p>å¸¸ç”¨å‘½ä»¤ï¼šmultiã€execã€discardã€watchã€unwatch</p><p>å½“è¾“å…¥multiå‘½ä»¤æ—¶ï¼Œä¹‹åè¾“å…¥çš„å‘½ä»¤éƒ½ä¼šè¢«æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œä½†ä¸ä¼šæ‰§è¡Œï¼Œç›´åˆ°è¾“å…¥execåï¼ŒRedisä¼šå°†é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ä¾æ¬¡æ‰§è¡Œï¼Œdiscardç”¨æ¥æ’¤é”€Execä¹‹å‰è¢«æš‚å­˜çš„å‘½ä»¤ï¼Œå¹¶ä¸æ˜¯å›æ»šã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240256.png" alt="" loading="lazy"></p></blockquote><blockquote><p>watch/unwatch</p><p>åœ¨æ‰§è¡Œmultiä¹‹å‰ï¼Œå…ˆæ‰§è¡Œwatch key1 [key2â€¦] ï¼Œwatchæä¾›çš„ä¹è§‚é”åŠŸèƒ½ï¼ˆåˆå§‹æ—¶ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œexecä¹‹åä¼šæ›´æ–°å½“å‰ç‰ˆæœ¬å·ï¼‰ï¼Œåœ¨ä½ execçš„é‚£ä¸€åˆ»ï¼Œå¦‚æœè¢«watchçš„é”®å‘ç”Ÿè¿‡æ”¹åŠ¨ï¼Œåˆ™multiåˆ°execä¹‹é—´çš„æŒ‡ä»¤å…¨éƒ¨ä¸æ‰§è¡Œã€‚</p><p>watchè¡¨ç¤ºç›‘æ§ï¼Œç›¸å½“äºåŠ é”ï¼Œä½†åœ¨æ‰§è¡Œå®Œexecæ—¶å°±ä¼šè§£é”ã€‚</p><p>unwatchå–æ¶ˆæ‰€æœ‰é”ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240336.png" alt="" loading="lazy"></p></blockquote><blockquote><p>Redisä¸­çš„äº‹åŠ¡çš„ç‰¹æ€§æ€»ç»“</p><p>1.å•ç‹¬çš„éš”ç¦»æ“ä½œ</p><p>â€‹ äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€çš„å‘½ä»¤æ‰“æ–­ã€‚</p><p>2.æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</p><p>â€‹ é˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ²¡æœ‰è¢«æäº¤ä¹‹å‰éƒ½ä¸ä¼šæ‰§è¡Œã€‚</p><p>3.ä¸èƒ½ä¿è¯åŸå­æ€§</p><p>â€‹ RedisåŒä¸€ä¸ªäº‹åŠ¡ä¸­å¦‚æœæœ‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶åçš„å‘½ä»¤ä»ç„¶ä¼šè¢«æ‰§è¡Œï¼Œä¸ä¼šå›æ»š</p></blockquote><h3 id="å…«ã€Redisæ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒã€äº†è§£ã€‘"><a class="headerlink" href="#å…«ã€Redisæ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒã€äº†è§£ã€‘"></a>å…«ã€Redisæ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒã€äº†è§£ã€‘</h3><hr><blockquote><p>subscribe channel è®¢é˜…é¢‘é“ ä¾‹å¦‚ï¼šsubscribe cctv5</p><p>publish channel content åœ¨æŒ‡å®šé¢‘é“ä¸­å‘å¸ƒå†…å®¹ ä¾‹å¦‚ï¼špublish cctv5 basketball</p><p>åŒæ—¶æ‰“å¼€ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œä¸€ä¸ªè®¢é˜…é¢‘é“ï¼Œä¸€ä¸ªåœ¨é¢‘é“ä¸­å‘å¸ƒå†…å®¹ï¼Œè®¢é˜…é¢‘é“çš„å®¢æˆ·ç«¯ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240777.png" alt="" loading="lazy"></p></blockquote><h3 id="ä¹ã€Rediså›¾å½¢åŒ–ç¨‹åºç•Œé¢ã€äº†è§£ã€‘"><a class="headerlink" href="#ä¹ã€Rediså›¾å½¢åŒ–ç¨‹åºç•Œé¢ã€äº†è§£ã€‘"></a>ä¹ã€Rediså›¾å½¢åŒ–ç¨‹åºç•Œé¢ã€äº†è§£ã€‘</h3><hr><blockquote><p>Redisä¸­é»˜è®¤æœ‰16ä¸ªåº“ï¼Œå¯ä»¥åœ¨ä¸åŒçš„åº“ä¸­å­˜å‚¨æ•°æ®ï¼Œé»˜è®¤ä½¿ç”¨0å·åº“å­˜å‚¨æ•°æ®ï¼Œä½¿ç”¨select 0-15å¯ä»¥é€‰æ‹©ä¸åŒçš„åº“ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240008.png" alt="" loading="lazy"></p></blockquote><blockquote><p>å®‰è£…ä¹‹å‰ï¼Œéœ€è¦ä¿®æ”¹redis.confæ–‡ä»¶ä¸­çš„bindä¸ºï¼š0.0.0.0ï¼ˆä¹‹å‰å·²ç»ä¿®æ”¹è¿‡äº†ï¼‰</p></blockquote><blockquote><p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/lework/RedisDesktopManager-Windows">https://github.com/lework/RedisDesktopManager-Windows</a></p></blockquote><blockquote><p>å®‰è£…ä¹‹åï¼Œè¾“å…¥IPåœ°å€ç™»å½•å³å¯çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240715.png" alt="" loading="lazy"></p></blockquote><h3 id="åã€Redisä¸­çš„æŒä¹…åŒ–ã€é‡ç‚¹ã€‘"><a class="headerlink" href="#åã€Redisä¸­çš„æŒä¹…åŒ–ã€é‡ç‚¹ã€‘"></a>åã€Redisä¸­çš„æŒä¹…åŒ–ã€é‡ç‚¹ã€‘</h3><hr><blockquote><p>Redisæœ‰ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼šRDBå’ŒAOFã€‚</p></blockquote><h4 id="1-RDBï¼ˆRedis-DataBaseï¼‰"><a class="headerlink" href="#1-RDBï¼ˆRedis-DataBaseï¼‰"></a>1.RDBï¼ˆRedis DataBaseï¼‰</h4><blockquote><p>å°†å†…å­˜ä¸­çš„æ•°æ®ä»¥å¿«ç…§çš„æ–¹å¼å†™å…¥ç£ç›˜ä¸­ï¼Œåœ¨redis.confæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å¦‚ä¸‹é…ç½®ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240254.png" alt="" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240309.png" alt="" loading="lazy"></p><p>save 900 1</p><p>save 300 10</p><p>save 60 10000</p><p>é…ç½®å«ä¹‰ï¼š</p><p>900ç§’å†…ï¼Œå¦‚æœè¶…è¿‡1ä¸ªkeyè¢«ä¿®æ”¹ï¼Œåˆ™å‘èµ·å¿«ç…§ä¿å­˜</p><p>300ç§’å†…ï¼Œå¦‚æœè¶…è¿‡10ä¸ªkeyè¢«ä¿®æ”¹ï¼Œåˆ™å‘èµ·å¿«ç…§ä¿å­˜</p><p>60ç§’å†…ï¼Œå¦‚æœ1ä¸‡ä¸ªkeyè¢«ä¿®æ”¹ï¼Œåˆ™å‘èµ·å¿«ç…§ä¿å­˜</p><p>RDBæ–¹å¼å­˜å‚¨çš„æ•°æ®ä¼šåœ¨</p><p>dump.rdbæ–‡ä»¶ä¸­ï¼ˆåœ¨å“ªä¸ªç›®å½•å¯åŠ¨redisæœåŠ¡ç«¯ï¼Œè¯¥æ–‡ä»¶å°±ä¼šåœ¨å¯¹åº”ç›®å½•ä¸‹ç”Ÿæˆï¼‰ï¼Œè¯¥æ–‡ä»¶ä¸èƒ½æŸ¥çœ‹ï¼Œå¦‚éœ€å¤‡ä»½ï¼Œå¯¹Redisæ“ä½œå®Œæˆä¹‹åï¼Œåªéœ€æ‹·è´è¯¥æ–‡ä»¶å³å¯ï¼ˆRedisæœåŠ¡ç«¯å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½è¯¥æ–‡ä»¶ï¼‰</p></blockquote><h4 id="2-AOFï¼ˆAppend-Of-Fileï¼‰"><a class="headerlink" href="#2-AOFï¼ˆAppend-Of-Fileï¼‰"></a>2.AOFï¼ˆAppend Of Fileï¼‰</h4><blockquote><p>AOFé»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ï¼ŒåŒæ ·æ˜¯åœ¨redis.confæ–‡ä»¶ä¸­å¼€å¯ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240657.png" alt="" loading="lazy"></p><p>é…ç½®æ–‡ä»¶ä¸­çš„appendonlyä¿®æ”¹ä¸ºyesï¼Œå¼€å¯AOFæŒä¹…åŒ–ã€‚å¼€å¯åï¼Œå¯åŠ¨redisæœåŠ¡ç«¯ï¼Œå‘ç°å¤šäº†ä¸€ä¸ªappendonly.aofæ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240766.png" alt="" loading="lazy"></p><p>ä¹‹åä»»ä½•çš„æ“ä½œéƒ½ä¼šä¿å­˜åœ¨appendonly.aofæ–‡ä»¶ä¸­ï¼Œå¯ä»¥è¿›è¡ŒæŸ¥çœ‹ï¼ŒRediså¯åŠ¨æ—¶ä¼šå°†appendonly.aofæ–‡ä»¶ä¸­çš„å†…å®¹æ‰§è¡Œä¸€éã€‚</p><p>å¦‚æœAOFå’ŒRDBåŒæ—¶å¼€å¯ï¼Œç³»ç»Ÿä¼šé»˜è®¤è¯»å–AOFçš„æ•°æ®ã€‚</p></blockquote><h4 id="3-æ€»ç»“"><a class="headerlink" href="#3-æ€»ç»“"></a>3.æ€»ç»“</h4><blockquote><p><strong>RDBä¼˜ç‚¹ä¸ç¼ºç‚¹</strong></p><p>ä¼˜ç‚¹</p><p>å¦‚æœè¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼ŒRDBæ–¹å¼è¦æ¯”AOFæ–¹å¼æ¢å¤é€Ÿåº¦è¦å¿«ã€‚</p><p>RDBæ˜¯ä¸€ä¸ªéå¸¸ç´§å‡‘(compact)çš„æ–‡ä»¶,å®ƒä¿å­˜äº†æŸä¸ªæ—¶é—´ç‚¹çš„æ•°æ®é›†ï¼Œéå¸¸é€‚åˆç”¨ä½œå¤‡ä»½ï¼ŒåŒæ—¶ä¹Ÿéå¸¸é€‚åˆç”¨ä½œç¾éš¾æ€§æ¢å¤ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œå†…å®¹ç´§å‡‘ï¼Œé€šè¿‡å¤‡ä»½åŸæ–‡ä»¶åˆ°æœ¬æœºå¤–çš„å…¶ä»–ä¸»æœºä¸Šï¼Œä¸€æ—¦æœ¬æœºå‘ç”Ÿå®•æœºï¼Œå°±èƒ½å°†å¤‡ä»½æ–‡ä»¶å¤åˆ¶åˆ°rediså®‰è£…ç›®å½•ä¸‹ï¼Œé€šè¿‡å¯ç”¨æœåŠ¡å°±èƒ½å®Œæˆæ•°æ®çš„æ¢å¤ã€‚</p><p>ç¼ºç‚¹</p><p>RDBè¿™ç§æŒä¹…åŒ–æ–¹å¼ä¸å¤ªé€‚åº”å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚ä¸¥æ ¼çš„æƒ…å†µï¼Œå› ä¸ºï¼Œå°½ç®¡æˆ‘ä»¬å¯ä»¥ç”¨è¿‡ä¿®æ”¹å¿«ç…§å®ç°æŒä¹…åŒ–çš„é¢‘ç‡ï¼Œä½†æ˜¯è¦æŒä¹…åŒ–çš„æ•°æ®æ˜¯ä¸€æ®µæ—¶é—´å†…çš„æ•´ä¸ªæ•°æ®é›†çš„çŠ¶æ€ï¼Œå¦‚æœåœ¨è¿˜æ²¡æœ‰è§¦å‘å¿«ç…§æ—¶ï¼Œæœ¬æœºå°±å®•æœºäº†ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“æ‰€åšçš„å†™æ“ä½œå°±éšä¹‹è€Œæ¶ˆå¤±äº†å¹¶æ²¡æœ‰æŒä¹…åŒ–æœ¬åœ°dump.rdbæ–‡ä»¶ä¸­ã€‚</p><p><strong>AOFä¼˜ç‚¹ä¸ç¼ºç‚¹</strong></p><p>ä¼˜ç‚¹</p><p>AOFæœ‰ç€å¤šç§æŒä¹…åŒ–ç­–ç•¥ï¼š</p><p>appendfsync always:æ¯ä¿®æ”¹åŒæ­¥ï¼Œæ¯ä¸€æ¬¡å‘ç”Ÿæ•°æ®å˜æ›´éƒ½ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œæ€§èƒ½è¾ƒå·®ï¼Œä½†æ•°æ®å®Œæ•´æ€§è¾ƒå¥½ã€‚</p><p>appendfsync everysec: æ¯ç§’åŒæ­¥ï¼Œæ¯ç§’å†…è®°å½•æ“ä½œï¼Œå¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸€ç§’å†…å®•æœºï¼Œæœ‰æ•°æ®ä¸¢å¤±ã€‚</p><p>appendfsync no:ä¸åŒæ­¥ã€‚</p><p>AOFæ–‡ä»¶æ˜¯ä¸€ä¸ªåªè¿›è¡Œè¿½åŠ æ“ä½œçš„æ—¥å¿—æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶å†™å…¥ä¸éœ€è¦è¿›è¡Œseekï¼Œå³ä½¿åœ¨è¿½åŠ çš„è¿‡ç¨‹ä¸­ï¼Œå†™å…¥äº†ä¸å®Œæ•´çš„å‘½ä»¤ï¼ˆä¾‹å¦‚ï¼šç£ç›˜å·²æ»¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨redis-check-aofå·¥å…·å¯ä»¥ä¿®å¤è¿™ç§é—®é¢˜</p><p>Rediså¯ä»¥åœ¨AOFæ–‡ä»¶å˜å¾—è¿‡å¤§æ—¶ï¼Œä¼šè‡ªåŠ¨åœ°åœ¨åå°å¯¹AOFè¿›è¡Œé‡å†™ï¼šé‡å†™åçš„æ–°çš„AOFæ–‡ä»¶åŒ…å«äº†æ¢å¤å½“å‰æ•°æ®é›†æ‰€éœ€çš„æœ€å°å‘½ä»¤é›†åˆã€‚æ•´ä¸ªé‡å†™æ“ä½œæ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œå› ä¸ºRedisåœ¨åˆ›å»ºAOFæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œä¼šç»§ç»­å°†å‘½ä»¤è¿½åŠ åˆ°ç°æœ‰çš„AOFæ–‡ä»¶ä¸­ï¼Œå³ä½¿åœ¨é‡å†™çš„è¿‡ç¨‹ä¸­å‘ç”Ÿå®•æœºï¼Œç°æœ‰çš„AOFæ–‡ä»¶ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ä¸€æ—¦æ–°AOFæ–‡ä»¶åˆ›å»ºå®Œæ¯•ï¼ŒRediså°±ä¼šä»æ—§çš„AOFæ–‡ä»¶åˆ‡æ¢åˆ°æ–°çš„AOFæ–‡ä»¶ï¼Œå¹¶å¯¹æ–°çš„AOFæ–‡ä»¶è¿›è¡Œè¿½åŠ æ“ä½œã€‚</p><p>ç¼ºç‚¹</p><p>å¯¹äºç›¸åŒçš„æ•°æ®é›†æ¥è¯´ï¼ŒAOFæ–‡ä»¶è¦æ¯”RDBæ–‡ä»¶å¤§ã€‚</p><p>æ ¹æ®æ‰€ä½¿ç”¨çš„æŒä¹…åŒ–ç­–ç•¥æ¥è¯´ï¼ŒAOFçš„é€Ÿåº¦è¦æ…¢äºRDBã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ç§’åŒæ­¥ç­–ç•¥æ•ˆæœè¾ƒå¥½ã€‚ä¸ä½¿ç”¨åŒæ­¥ç­–ç•¥çš„æƒ…å†µä¸‹ï¼ŒAOFä¸RDBé€Ÿåº¦ä¸€æ ·å¿«ã€‚</p></blockquote><h3 id="åä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶-ã€é‡ç‚¹ã€‘"><a class="headerlink" href="#åä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶-ã€é‡ç‚¹ã€‘"></a>åä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶ ã€é‡ç‚¹ã€‘</h3><hr><blockquote><p>ä¸»ä»å¤åˆ¶æ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶å®ƒçš„RedisæœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹(master)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave)ï¼›æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œä¸”ä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹ï¼ˆæˆ–æ²¡æœ‰ä»èŠ‚ç‚¹ï¼‰ï¼Œä½†ä¸€ä¸ªä»èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071240740.png" alt="" loading="lazy"></p><blockquote><p>ä¸»ä»å¤åˆ¶çš„ä½œç”¨ï¼š</p><p>1.æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚</p><p>2.æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸€ç§æœåŠ¡çš„å†—ä½™.</p><p>3.è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥ç”±ä¸»èŠ‚ç‚¹æä¾›å†™æœåŠ¡ï¼Œç”±ä»èŠ‚ç‚¹æä¾›è¯»æœåŠ¡ï¼ˆå³å†™Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯»Redisæ•°æ®æ—¶åº”ç”¨è¿æ¥ä»èŠ‚ç‚¹ï¼‰ï¼Œåˆ†æ‹…æœåŠ¡å™¨è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è¯»è´Ÿè½½ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡ã€‚</p><p>4.é«˜å¯ç”¨åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤è¯´ä¸»ä»å¤åˆ¶æ˜¯Redisé«˜å¯ç”¨çš„åŸºç¡€.</p></blockquote><blockquote><p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p><p>1.æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; info replication</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241232.png" alt="" loading="lazy"></p><p>2.å…³é—­å½“å‰è¿è¡Œçš„redisï¼Œæ‰“å¼€å››ä¸ªé“¾æ¥ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œæ‹·è´ä¸‰ä¸ªredis.confæ–‡ä»¶ï¼ˆæ”¹æˆ6379ï¼Œ6380ï¼Œ6381ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241363.png" alt="" loading="lazy"></p><p>3.åˆ†åˆ«ä¿®æ”¹è¿™ä¸‰ä¸ªæ–‡ä»¶ä¿¡æ¯ï¼Œéœ€è¦ä¿®æ”¹ï¼šç«¯å£ï¼Œpidåå­—ï¼Œlogæ–‡ä»¶åå­—ï¼Œdump.rdbåå­—</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241463.png" alt="" loading="lazy"></p><p>port 6379</p><p>pidfile /var/run/redis_6379.pid</p><p>logfile â€œ6379.logâ€</p><p>dbfilename dump6379.rdb</p><p>port 6380</p><p>pidfile /var/run/redis_63780pid</p><p>logfile â€œ6380.logâ€</p><p>dbfilename dump6380.rdb</p><p>port 6381</p><p>pidfile /var/run/redis_6381.pid</p><p>logfile â€œ6381.logâ€</p><p>dbfilename dump6381.rdb</p><p>4.åˆ†åˆ«åœ¨ä¸‰ä¸ªé“¾æ¥ä¸­å¯åŠ¨6379ï¼Œ6380ï¼Œ6381ä¸‰å°redis-serverï¼Œåœ¨ç¬¬å››ä¸ªé“¾æ¥ä¸­æŸ¥çœ‹</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241739.png" alt="" loading="lazy"></p><p>æŸ¥çœ‹çŠ¶æ€</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241022.png" alt="" loading="lazy"></p><p>5.é…ç½®ä¸€ä¸»äºŒä»</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°Rediséƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®ä»æœºå³å¯ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨6379ä¸ºä¸»æœºï¼Œ6380å’Œ6381ä¸ºä»æœº.</p><p>åœ¨å¯¹åº”6380çš„é“¾æ¥ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-cli -p 6380</span><br><span class="line"></span><br><span class="line">127.0.0.1:6380&gt; slaveof 127.0.0.1 6379</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241702.png" alt="" loading="lazy"></p><p>6380ä»æœºé…ç½®æˆåŠŸä¹‹åï¼Œå¯ä»¥å»ä¸»æœºä¸­æŸ¥çœ‹å¯¹åº”ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241494.png" alt="" loading="lazy"></p><p>6381ä»æœºé…ç½®æ–¹å¼å’Œ6380ä¸€æ ·ï¼Œé…ç½®æˆåŠŸä¹‹åå¯ä»¥å†å»çœ‹ä¸€ä¸‹ä¸»æœº</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241741.png" alt="" loading="lazy"></p><p>6.ç”±äºè¿™é‡Œä½¿ç”¨çš„æ˜¯å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œæ‰€ä»¥æ˜¯æš‚æ—¶çš„ï¼Œä¸€èˆ¬å…¬å¸é…ç½®ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œå±äºæ°¸ä¹…æ€§é…ç½®ï¼Œç›¸å½“äºä¸€æ‰“å¼€å½“å‰æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å°±æ˜¯ä»æœºï¼Œä¸€èˆ¬ä¸»æœºå¯ä»¥å†™ï¼Œä»æœºä¸èƒ½å†™åªèƒ½è¯»ï¼Œä¸»æœºä¸­çš„æ‰€æœ‰ä¿¡æ¯å’Œæ•°æ®éƒ½ä¼šè¢«ä»æœºä¿å­˜ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241875.png" alt="" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241162.png" alt="" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241729.png" alt="" loading="lazy"></p><p>å³ä½¿ä¸»æœºæ–­å¼€é“¾æ¥ï¼ˆ127.0.0.1:6379&gt;shutdownï¼‰ï¼Œä»æœºä»ç„¶å¯ä»¥è¿æ¥åˆ°ä¸»æœºï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å‘½ä»¤è¡Œé…ç½®çš„ä»æœºï¼Œä»æœºä¸€æ—¦æ–­å¼€é“¾æ¥åï¼Œå°±ä¼šå˜å›ä¸»æœºäº†ï¼Œå¦‚æœå†æ¬¡å˜å›ä»æœºï¼Œä»æ—§å¯ä»¥è·å–ä¸»æœºä¸­çš„å€¼.</p><p>å¦‚æœä¸»æœºæ–­å¼€é“¾æ¥ï¼Œä»æœºå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š127.0.0.1:6380&gt;slaveof no one ä½¿è‡ªå·±æˆä¸ºä¸»æœº</p><p>7.ä¸»ä»å¤åˆ¶åŸç†</p><p>Slaveå¯åŠ¨æˆåŠŸè¿æ¥åˆ°masteråä¼šå‘é€ä¸€ä¸ªsyncåŒæ­¥å‘½ä»¤ï¼ŒMasteræ¥åˆ°å‘½ä»¤åï¼Œä¼šå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œmasterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°salveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œæ•´çš„åŒæ­¥.</p><p>å…¨é‡å¤åˆ¶ï¼šsalveæœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­.</p><p>å¢é‡å¤åˆ¶ï¼šmasterç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ é€’ç»™salveï¼Œå®ŒæˆåŒæ­¥.</p></blockquote><blockquote><p>å¦‚æœæ˜¯é…ç½®æ–‡ä»¶é…ç½®ï¼Œå¯ç›´æ¥åœ¨å¯¹åº”çš„redis.confæ–‡ä»¶ä¸­æ·»åŠ ï¼š slaveof 127.0.0.1 6379 ï¼ˆå’Œå‘½ä»¤ä¸€æ ·ï¼‰</p></blockquote><h3 id="åäºŒã€Redisçš„å“¨å…µæ¨¡å¼ã€é‡ç‚¹ã€‘"><a class="headerlink" href="#åäºŒã€Redisçš„å“¨å…µæ¨¡å¼ã€é‡ç‚¹ã€‘"></a>åäºŒã€Redisçš„å“¨å…µæ¨¡å¼ã€é‡ç‚¹ã€‘</h3><hr><blockquote><p>å½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œå¹¶ä¸”æˆ‘ä»¬å¹¶æ²¡æœ‰åŠæ—¶å‘ç°ï¼Œè¿™æ—¶å€™å°±å¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸¢å¤±æˆ–ç¨‹åºæ— æ³•è¿è¡Œã€‚æ­¤æ—¶ï¼Œredisçš„å“¨å…µæ¨¡å¼å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå¯ä»¥ç”¨å®ƒæ¥åšredisçš„é«˜å¯ç”¨.</p><p>æ¯ä¸ªå“¨å…µéƒ½æ˜¯ç›‘æ§ä¸»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹å®•æœºï¼Œå“¨å…µä¸ä¼šå®•æœºï¼</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241034.png" alt="" loading="lazy"></p><blockquote><p>åŠŸèƒ½ä½œç”¨ï¼š</p><p>1.ç›‘æ§(monitoring)ï¼šSentinel ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸ã€‚</p><p>2.æé†’(Notifation)ï¼šå½“è¢«ç›‘æ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œ Sentinel å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚</p><p>3.è‡ªåŠ¨æ•…éšœè½¬ç§»(Automatic failover)ï¼šå½“ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼Œ Sentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œï¼Œ å®ƒä¼šå°†å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä¸­ä¸€ä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œ å¹¶è®©å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä»–ä»æœåŠ¡å™¨æ”¹ä¸ºå¤åˆ¶æ–°çš„ä¸»æœåŠ¡å™¨ï¼› å½“å®¢æˆ·ç«¯è¯•å›¾è¿æ¥å¤±æ•ˆçš„ä¸»æœåŠ¡å™¨æ—¶ï¼Œ é›†ç¾¤ä¹Ÿä¼šå‘å®¢æˆ·ç«¯è¿”å›æ–°ä¸»æœåŠ¡å™¨çš„åœ°å€ï¼Œ ä½¿å¾—é›†ç¾¤å¯ä»¥ä½¿ç”¨æ–°ä¸»æœåŠ¡å™¨ä»£æ›¿å¤±æ•ˆæœåŠ¡å™¨ã€‚</p></blockquote><blockquote><p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p><p>1.åˆ›å»ºå“¨å…µé…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# vim sentinel.conf</span><br></pre></td></tr></table></figure><p>sentinel.confæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼šï¼ˆæ ¼å¼ï¼šsentinel monitor è¢«ç›‘æ§åç§° host port 1ï¼‰</p><p>sentinel monitor myredis 127.0.0.1 6379 1</p><p>æ³¨æ„ï¼šéœ€è¦ä¿®æ”¹redis.confæ–‡ä»¶ä¸­çš„bindä¸ºï¼š0.0.0.0ï¼ˆä¹‹å‰å·²ç»ä¿®æ”¹è¿‡äº†ï¼‰ï¼Œå¦‚æœæ˜¯ä¸‰å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½è¦è®¾ç½®sentinel.confæ–‡ä»¶å¹¶å¯åŠ¨å“¨å…µï¼Œ127.0.0.1æ”¹æˆä¸»æœºçš„IPåœ°å€ï¼Œï¼ˆä»æœºä¹Ÿæ˜¯ç›‘æ§ä¸»æœºIPï¼Œç›¸å½“äºä¸‰å°æœåŠ¡å™¨çš„sentinel.confçš„å†…å®¹éƒ½æ˜¯ä¸€æ ·çš„ï¼šsentinel monitor myredis ä¸»æœºIPåœ°å€ 6379 1ï¼‰ï¼Œåé¢çš„æ•°å­—1è¡¨ç¤ºæœ‰1ä¸ªsentinelè®¤ä¸ºä¸€ä¸ªmasterå¤±æ•ˆæ—¶ï¼Œmasterå°±ç®—çœŸæ­£å¤±æ•ˆï¼Œslaveä¼šä»¥æŠ•ç¥¨çš„æ–¹å¼é€‰ä¸¾æˆä¸ºä¸»æœºï¼Œä¸€èˆ¬è®¾ç½®çš„å€¼ä¸ºä»æœºæ•°é‡ä¸€åŠä»¥ä¸Šï¼Œæ¯”å¦‚è¯´ï¼šä¸‰ä¸ªä»æœºå°±è®¾ç½®ä¸ºï¼š2</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241771.png" alt="" loading="lazy"></p><p>2.å¯åŠ¨å“¨å…µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-sentinel sentinel.conf</span><br></pre></td></tr></table></figure><p><img src="Pictures%5C59.png" alt="" loading="lazy"></p><p>3.å¦‚æœMasterèŠ‚ç‚¹æ–­å¼€äº†ï¼ˆä¸»æœºå®•æœºäº†ï¼‰ï¼Œè¿‡ä¸€ä¼šï¼Œä¼šå‘é€å“¨å…µæ—¥å¿—ï¼Œå¹¶è‡ªåŠ¨é€šè¿‡ç®—æ³•åœ¨å…¶ä»–ä¸¤ä¸ªä»æœºä¸­é€‰æ‹©ä¸€ä¸ªæˆä¸ºä¸»æœº.</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071241535.png" alt="" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242550.png" alt="" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242883.png" alt="" loading="lazy"></p><p>å¦‚æœä¹‹å‰çš„ä¸»æœº6379åˆé‡æ–°å¯åŠ¨äº†ï¼Œè¿‡ä¸€ä¼šï¼Œå“¨å…µæ£€æµ‹åˆ°äº†ä¹‹åï¼Œä¼šæŠŠ6379è®¾ç½®ä¸ºä»æœºï¼</p><p>å“¨å…µæ¨¡å¼çš„ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹</p><p>1.å“¨å…µé›†ç¾¤æ¨¡å¼æ˜¯åŸºäºä¸»ä»æ¨¡å¼çš„ï¼Œæ‰€æœ‰ä¸»ä»çš„ä¼˜ç‚¹ï¼Œå“¨å…µæ¨¡å¼åŒæ ·å…·æœ‰ã€‚</p><p>2.ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿå¯ç”¨æ€§æ›´å¥½ã€‚</p><p>3.å“¨å…µæ¨¡å¼æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œç³»ç»Ÿæ›´å¥å£®ï¼Œå¯ç”¨æ€§æ›´é«˜ã€‚</p><p>ç¼ºç‚¹</p><p>1.Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚</p><p>2.å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®ä¹Ÿä¸ç®€å•ï¼Œç”šè‡³å¯ä»¥è¯´æœ‰äº›ç¹ç</p></blockquote><h3 id="åä¸‰ã€Redisç¼“å­˜ç©¿é€ï¼Œå‡»ç©¿ï¼Œé›ªå´©ï¼Œå€¾æ–œ"><a class="headerlink" href="#åä¸‰ã€Redisç¼“å­˜ç©¿é€ï¼Œå‡»ç©¿ï¼Œé›ªå´©ï¼Œå€¾æ–œ"></a>åä¸‰ã€Redisç¼“å­˜ç©¿é€ï¼Œå‡»ç©¿ï¼Œé›ªå´©ï¼Œå€¾æ–œ</h3><hr><h4 id="1-1-ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"><a class="headerlink" href="#1-1-ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"></a>1.1 ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰</h4><blockquote><p>æ¦‚å¿µï¼šå½“ç”¨æˆ·å»æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°rediså†…å­˜æ•°æ®åº“ä¸­æ²¡æœ‰ï¼Œäºæ˜¯å‘æŒä¹…å±‚æ•°æ®åº“æŸ¥è¯¢ï¼Œå‘ç°ä¹Ÿæ²¡æœ‰ï¼Œäºæ˜¯æŸ¥è¯¢å¤±è´¥ï¼Œå½“ç”¨æˆ·è¿‡å¤šæ—¶ï¼Œç¼“å­˜éƒ½æ²¡æœ‰æŸ¥åˆ°ï¼Œäºæ˜¯éƒ½å»æŸ¥æŒä¹…å±‚æ•°æ®åº“ï¼Œè¿™ä¼šç»™æŒä¹…å±‚æ•°æ®åº“é€ æˆå¾ˆå¤§çš„å‹åŠ›ï¼Œæ­¤æ—¶ç›¸å½“äºå‡ºç°äº†ç¼“å­˜ç©¿é€ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242308.png" alt="" loading="lazy"></p><blockquote><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1.å¸ƒéš†è¿‡æ»¤å™¨ï¼šæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥hashå½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™ä¸¢å¼ƒï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„å‹åŠ›ï¼Œä½†æ˜¯ï¼Œå¸ƒéš†è¿‡æ»¤å™¨æœ‰è¯¯å·®ï¼Œè¯´myql æœ‰è¯¥id ï¼Œä¸ä¸€å®šæœ‰ï¼Œè¯´myql æ²¡æœ‰è¯¥idï¼Œä¸€å®šæ²¡æœ‰ ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242234.png" alt="" loading="lazy"></p><p>2.ç¼“å­˜ç©ºå¯¹è±¡ï¼šå½“å­˜å‚¨å±‚æŸ¥ä¸åˆ°æ—¶ï¼Œå³ä½¿è¿”å›çš„ç©ºå¯¹è±¡ä¹Ÿå°†å…¶ç¼“å­˜èµ·æ¥ï¼ŒåŒæ—¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹‹åå†è®¿é—®è¿™ä¸ªæ•°æ®å°†ä¼šä»ç¼“å­˜ä¸­è·å–ï¼Œä¿æŠ¤åç«¯æ•°æ®.</p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242723.png" alt="" loading="lazy"></p><p>ä½†ä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>1.å¦‚æœç©ºå€¼è¢«ç¼“å­˜èµ·æ¥ï¼Œå°±æ„å‘³ç€éœ€è¦æ›´å¤šçš„ç©ºé—´å­˜å‚¨æ›´å¤šçš„é”®ï¼Œä¼šæœ‰å¾ˆå¤šç©ºå€¼çš„é”®.</p><p>2.å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“.</p></blockquote><h4 id="1-2-ç¼“å­˜å‡»ç©¿ï¼ˆè®¿é—®é‡å¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"><a class="headerlink" href="#1-2-ç¼“å­˜å‡»ç©¿ï¼ˆè®¿é—®é‡å¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"></a>1.2 ç¼“å­˜å‡»ç©¿ï¼ˆè®¿é—®é‡å¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰</h4><blockquote><p>æŒ‡å¯¹æŸä¸€ä¸ªkeyçš„é¢‘ç¹è®¿é—®ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ä¼šç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ï¼Œä¾‹å¦‚å¾®åšç”±äºæŸä¸ªçƒ­æœå¯¼è‡´å®•æœº.</p><p>â€‹</p><p>å…¶å®å°±æ˜¯ï¼šå½“æŸä¸ªkeyåœ¨è¿‡æœŸçš„ç¬é—´ï¼Œæœ‰å¤§é‡çš„è¯·æ±‚å¹¶å‘è®¿é—®ï¼Œè¿™ç±»æ•°æ®ä¸€æ®µæ˜¯çƒ­ç‚¹æ•°æ®ï¼Œç”±äºç¼“å­˜è¿‡æœŸï¼Œä¼šåŒæ—¶è®¿é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°æ•°æ®ï¼Œå¹¶å›å†™ç¼“å­˜ï¼Œå¯¼è‡´æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242941.png" alt="" loading="lazy"></p><blockquote><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1.è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸï¼šä»ç¼“å­˜å±‚é¢ä¸Šæ¥è¯´ï¼Œä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå°±ä¸ä¼šå‡ºç°çƒ­ç‚¹keyè¿‡æœŸåäº§ç”Ÿçš„é—®é¢˜.</p><p>2.æ·»åŠ äº’æ–¥é”ï¼šä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯å¯¹æ¯ä¸ªkeyåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™ï¼Œå› æ­¤åªéœ€è¦ç­‰å¾…å³å¯ï¼Œè¿™ç§æ–¹å¼å°†é«˜å¹¶å‘çš„å‹åŠ›è½¬ç§»åˆ°äº†åˆ†å¸ƒå¼é”ä¸Šï¼Œå¯¹åˆ†å¸ƒå¼é”ä¹Ÿæ˜¯ä¸€ç§æå¤§çš„è€ƒéªŒ.</p></blockquote><h4 id="1-3-ç¼“å­˜é›ªå´©"><a class="headerlink" href="#1-3-ç¼“å­˜é›ªå´©"></a>1.3 ç¼“å­˜é›ªå´©</h4><blockquote><p>æŒ‡åœ¨æŸä¸€ä¸ªæ—¶é—´æ®µï¼Œç¼“å­˜é›†ä¸­è¿‡æœŸå¤±æ•ˆæˆ–Rediså®•æœºå¯¼è‡´çš„ï¼Œä¾‹å¦‚åŒåä¸€æŠ¢è´­çƒ­é—¨å•†å“ï¼Œè¿™äº›å•†å“éƒ½ä¼šæ”¾åœ¨ç¼“å­˜ä¸­ï¼Œå‡è®¾ç¼“å­˜æ—¶é—´ä¸ºä¸€ä¸ªå°æ—¶ï¼Œä¸€ä¸ªå°æ—¶ä¹‹åï¼Œè¿™äº›å•†å“çš„ç¼“å­˜éƒ½è¿‡æœŸäº†ï¼Œè®¿é—®å‹åŠ›ç¬é—´éƒ½æ¥åˆ°äº†æ•°æ®åº“ä¸Šï¼Œæ­¤æ—¶æ•°æ®åº“ä¼šäº§ç”Ÿå‘¨æœŸæ€§çš„å‹åŠ›æ³¢å³°ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šåˆ°è¾¾å­˜å‚¨å±‚ï¼Œå­˜å‚¨å±‚çš„è°ƒç”¨é‡æš´å¢ï¼Œé€ æˆå­˜å‚¨å±‚æŒ‚æ‰çš„æƒ…å†µ.</p></blockquote><p><img src="Pictures%5C67.png" alt="" loading="lazy"></p><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242355.png" alt="" loading="lazy"></p><blockquote><p>å…¶å®æ¯”è¾ƒè‡´å‘½çš„ç¼“å­˜é›ªå´©ï¼Œæ˜¯ç¼“å­˜æœåŠ¡å™¨æŸä¸ªèŠ‚ç‚¹å®•æœºæˆ–æ–­ç½‘ï¼Œå› ä¸ºè‡ªç„¶å½¢æˆçš„ç¼“å­˜é›ªå´©ï¼Œä¸€å®šæ˜¯åœ¨æŸä¸ªæ—¶é—´æ®µé›†ä¸­åˆ›å»ºç¼“å­˜ï¼Œæ­¤æ—¶çš„æ•°æ®åº“è¿˜æ˜¯å¯ä»¥é¡¶ä½å‹åŠ›çš„ï¼Œè€Œç¼“å­˜æœåŠ¡èŠ‚ç‚¹çš„å®•æœºï¼Œå¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆçš„å‹åŠ›æ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œæœ‰å¯èƒ½ç¬é—´å°±æŠŠæœåŠ¡å™¨å‹å®.</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1.é…ç½®Redisçš„é«˜å¯ç”¨ï¼šå…¶å®å°±æ˜¯æ­å»ºé›†ç¾¤ç¯å¢ƒï¼Œæœ‰æ›´å¤šçš„å¤‡ç”¨æœº.</p><p>2.é™æµé™çº§ï¼šåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æœåŠ¡å™¨ä»¥åŠå†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ï¼Œæ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾….</p><p>3.æ•°æ®é¢„çƒ­ï¼šåœ¨é¡¹ç›®æ­£å¼éƒ¨ç½²ä¹‹å‰ï¼ŒæŠŠå¯èƒ½ç”¨çš„æ•°æ®é¢„å…ˆè®¿é—®ä¸€è¾¹ï¼Œè¿™æ ·å¯ä»¥æŠŠä¸€äº›æ•°æ®åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œåœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®ä¹‹å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸­ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´å°½é‡å‡è¡¡.</p></blockquote><h4 id="1-4-ç¼“å­˜å€¾æ–œ"><a class="headerlink" href="#1-4-ç¼“å­˜å€¾æ–œ"></a>1.4 ç¼“å­˜å€¾æ–œ</h4><blockquote><p>æŒ‡æŸä¸€å°redisæœåŠ¡å™¨å‹åŠ›è¿‡å¤§è€Œå¯¼è‡´è¯¥æœåŠ¡å™¨å®•æœº.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242384.png" alt="" loading="lazy"></p><h3 id="åå››ã€Redisé›†ç¾¤æ­å»º"><a class="headerlink" href="#åå››ã€Redisé›†ç¾¤æ­å»º"></a>åå››ã€Redisé›†ç¾¤æ­å»º</h3><hr><p><img src="https://cdn.jsdelivr.net/gh/CoutureOne/blogimg@main/img/202211071242006.png" alt="" loading="lazy"></p><h3 id="åäº”ã€Rediså…¶ä»–å¸¸è§é—®é¢˜"><a class="headerlink" href="#åäº”ã€Rediså…¶ä»–å¸¸è§é—®é¢˜"></a>åäº”ã€Rediså…¶ä»–å¸¸è§é—®é¢˜</h3><hr><h4 id="1-keyçš„ç”Ÿå­˜æ—¶é—´åˆ°äº†ï¼ŒRedisä¼šç«‹å³åˆ é™¤å—ï¼Ÿ"><a class="headerlink" href="#1-keyçš„ç”Ÿå­˜æ—¶é—´åˆ°äº†ï¼ŒRedisä¼šç«‹å³åˆ é™¤å—ï¼Ÿ"></a>1.keyçš„ç”Ÿå­˜æ—¶é—´åˆ°äº†ï¼ŒRedisä¼šç«‹å³åˆ é™¤å—ï¼Ÿ</h4><blockquote><p><strong>ä¸ä¼šç«‹å³åˆ é™¤</strong></p><p>1.1å®šæœŸåˆ é™¤ï¼šRedisæ¯éš”ä¸€æ®µæ—¶é—´å°±å»ä¼šå»æŸ¥çœ‹Redisè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œä¼šå†100msçš„é—´éš”ä¸­é»˜è®¤æŸ¥çœ‹3ä¸ªkeyã€‚</p><p>1.2æƒ°æ€§åˆ é™¤ï¼šå¦‚æœå½“ä½ å»æŸ¥è¯¢ä¸€ä¸ªå·²ç»è¿‡äº†ç”Ÿå­˜æ—¶é—´çš„keyæ—¶ï¼ŒRedisä¼šå…ˆæŸ¥çœ‹å½“å‰keyçš„ç”Ÿå­˜æ—¶é—´ï¼Œæ˜¯å¦å·²ç»åˆ°äº†ï¼Œç›´æ¥åˆ é™¤å½“å‰keyï¼Œå¹¶ä¸”ç»™ç”¨æˆ·è¿”å›ä¸€ä¸ªç©ºå€¼ã€‚</p></blockquote><h4 id="2-Redisçš„æ·˜æ±°æœºåˆ¶"><a class="headerlink" href="#2-Redisçš„æ·˜æ±°æœºåˆ¶"></a>2.Redisçš„æ·˜æ±°æœºåˆ¶</h4><blockquote><p>åœ¨Rediså†…å­˜å·²ç»æ»¡çš„æ—¶å€™ï¼Œæ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ•°æ®ï¼Œæ‰§è¡Œæ·˜æ±°æœºåˆ¶ã€‚(redis.confä¸­é…ç½®)</p><p>2.1 volatile-lruï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨è®¾ç½®è¿‡äº†ç”Ÿå­˜æ—¶é—´çš„keyä¸­å¹²æ‰ä¸€ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚</p><p>2.2 allkeys-lruï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨å…¨éƒ¨çš„keyä¸­å¹²æ‰ä¸€ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚</p><p>2.3 volatile-lfuï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨è®¾ç½®è¿‡äº†ç”Ÿå­˜æ—¶é—´çš„keyä¸­å¹²æ‰ä¸€ä¸ªæœ€è¿‘æœ€å°‘é¢‘æ¬¡ä½¿ç”¨çš„keyã€‚</p><p>2.4 allkeys-lfuï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨å…¨éƒ¨çš„keyä¸­å¹²æ‰ä¸€ä¸ªæœ€è¿‘æœ€å°‘é¢‘æ¬¡ä½¿ç”¨çš„keyã€‚</p><p>2.5 volatile-randomï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨è®¾ç½®è¿‡äº†ç”Ÿå­˜æ—¶é—´çš„keyä¸­éšæœºå¹²æ‰ä¸€ä¸ªã€‚</p><p>2.6 allkeys-randomï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨å…¨éƒ¨çš„keyä¸­éšæœºå¹²æ‰ä¸€ä¸ªã€‚</p><p>2.7 volatile-ttlï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šåœ¨è®¾ç½®è¿‡äº†ç”Ÿå­˜æ—¶é—´çš„keyä¸­å¹²æ‰ä¸€ä¸ªå‰©ä½™ç”Ÿå­˜æ—¶é—´æœ€å°‘çš„keyã€‚</p><p>2.8 noevictionï¼šï¼ˆé»˜è®¤ï¼‰åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œç›´æ¥æŠ¥é”™ã€‚</p><p>æ–¹æ¡ˆï¼šæŒ‡å®šæ·˜æ±°æœºåˆ¶çš„æ–¹å¼ï¼šmaxmemory-policyå…·ä½“ç­–ç•¥ï¼Œè®¾ç½®Redisçš„æœ€å¤§å†…å­˜ï¼šmaxmemory å­—èŠ‚å¤§å°</p></blockquote></article><div class="post-copyright"><div class="post-copyright__author_group"><a class="post-copyright__author_img" href="/about/"><img class="post-copyright__author_img_front" src="/img/pwa/favicon.ico"></a><div class="post-copyright__author_name">Couture's Blog</div><div class="post-copyright__author_desc"></div></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div id="quit-box" onclick="RemoveRewardMask()"></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬æ–‡æ˜¯åŸåˆ›æ–‡ç« ï¼Œé‡‡ç”¨<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>åè®®ï¼Œå®Œæ•´è½¬è½½è¯·æ³¨æ˜æ¥è‡ª<a href="/">Couture's Blog</a></span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8F%92%E4%BB%B6%E5%AD%A6%E4%B9%A0/"><span class="tags-punctuation"></span>æ’ä»¶å­¦ä¹ <span class="tagsPageCount">3</span></a></div></div></div><nav class="needEndHide pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/62191.html"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">C# windows ç¯å¢ƒæ­å»º</div></div></a></div><div class="next-post pull-right"><a href="/posts/33708.html"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">RabbitMQ</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="solitude st-star-smile-fill"></i><span>å–œæ¬¢è¿™ç¯‡çš„äººä¹Ÿçœ‹äº†</span><div class="relatedPosts-link"><a onclick="event.preventDefault(),toRandomPost()" href="javascript:void(0);" rel="external nofollow" data-pjax-state="">éšä¾¿é€›é€›</a></div></div><div class="relatedPosts-list"><div><a href="/posts/33708.html" title="RabbitMQ"><img class="cover" src="https://s3.qjqq.cn/50/6615fcf9e16cf.webp!color" alt="cover"><div class="content is-center"><div class="title">RabbitMQ</div></div></a></div><div><a href="/posts/64556.html" title="Shiro"><img class="cover" src="https://s3.qjqq.cn/50/6615fa2c674e8.webp!color" alt="cover"><div class="content is-center"><div class="title">Shiro</div></div></a></div></div></div><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="solitude st-chat-fill"></i><span>è¯„è®º</span><span></span></div></div><div class="comment-wrap"><div id="comment"></div><script>async function initComment(){const t=()=>{new Valine(Object.assign({el:"#comment",appId:"aVReZaifAnr7vskgWFexgbCb-gzGzoHsz",appKey:"1DB6cCOWB3GgFDbDaAzm9Ogc",avatar:"monsterid",serverURLs:"https://avrezaif.lc-cn-n1-shared.com",emojiMaps:"",path:window.location.pathname,visitor:!1,avatar_cdn:"https://cravatar.cn/avatar/",placeholder:"è¯·å‹å¥½å‘è¨€å“¦~"}));GLOBAL_CONFIG.lightbox&&utils.lightbox(document.querySelectorAll("#comment .vcontent img:not(.vemoji)")),sco.owoBig()},a=async()=>{"function"==typeof Valine||await getScript("https://cdn.staticfile.net/valine/1.5.1/Valine.min.js"),t()};await a()}</script></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><div class="author-info__top-group"><div class="author-info__sayhi" id="author-info__sayhi" onclick="sco.changeSayHelloText()">sayhello.morning</div></div></div><div class="avatar-img-group"><img class="avatar-img" alt="å¤´åƒ" src="/img/avatar.png"><div class="avatar-sticker"><img class="avatar-sticker-img" src="https://7.isyangs.cn/29/657bdc6ad8d9d-29.png" alt="å¿ƒæƒ…è´´çº¸"></div></div><div class="author-info__description_group"><div class="author-info__description">å¥½è®°æ€§ä¸å¦‚<b>çƒ‚ç¬”å¤´</b>ï¼Œåœ¨å¿«è¦é—å¿˜æ—¶å¯¹è‡ªå·±çš„<b>è®°å½•</b>ï¼Œå¦‚æœèƒ½å¸®åˆ°ä½ ï¼Œæ˜¯æˆ‘è«å¤§çš„<b>è£å¹¸</b>ã€‚</div><div class="author-info__description2"></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about/"><div class="author-info__name">Couture</div><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon" target="_blank" rel="noopener" href="https://github.com/CoutureOne" title="Github"><i class="solitude st-github-line"></i></a><a class="social-icon" target="_blank" rel="noopener" href="https://space.bilibili.com/523459350" title="Bilibili"><i class="solitude st-bilibili-line"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="solitude st-menu-line"></i><span>æ–‡ç« ç›®å½•</span></div><div class="toc-content" id="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80"><span class="toc-text">ä¸€ã€å¼•è¨€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%8B%E5%8A%9B%E8%BF%87%E5%A4%A7"><span class="toc-text">1.1 æ•°æ®åº“å‹åŠ›è¿‡å¤§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%90%8C%E6%AD%A5"><span class="toc-text">1.2 æ•°æ®ä¸åŒæ­¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E4%BC%A0%E7%BB%9F%E9%94%81%E5%A4%B1%E6%95%88"><span class="toc-text">1.3 ä¼ ç»Ÿé”å¤±æ•ˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Redis%E4%BB%8B%E7%BB%8D"><span class="toc-text">äºŒã€Redisä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%85%B3%E4%BA%8E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8CNOSQL%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E9%94%AE%E5%80%BC%E5%AF%B9%E5%AD%98%E5%82%A8%EF%BC%89"><span class="toc-text">2.1 å…³äºå…³ç³»å‹æ•°æ®åº“å’ŒNOSQLæ•°æ®åº“ï¼ˆé”®å€¼å¯¹å­˜å‚¨ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-Redis%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.2 Redisä»‹ç»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81Redis%E5%AE%89%E8%A3%85"><span class="toc-text">ä¸‰ã€Rediså®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%AE%89%E8%A3%85Redis"><span class="toc-text">3.1 å®‰è£…Redis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.3 å®‰è£…æ­¥éª¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-Redis%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">3.4 Redisçš„é…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81redis-benchmark%E5%AE%98%E6%96%B9%E8%87%AA%E5%B8%A6%E7%9A%84%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7"><span class="toc-text">å››ã€redis-benchmarkå®˜æ–¹è‡ªå¸¦çš„æ€§èƒ½æµ‹è¯•å·¥å…·</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%9C%A8%E5%AE%89%E8%A3%85%E7%9A%84redis%E4%B8%AD%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0redis-benchmark"><span class="toc-text">4.1 åœ¨å®‰è£…çš„redisä¸­å¯ä»¥çœ‹åˆ°redis-benchmark</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%85%B3%E4%BA%8Eredis-benchmark-%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0"><span class="toc-text">4.2 å…³äºredis-benchmark çš„ä¸€äº›å‚æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81Redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-text">äº”ã€Redisçš„æ•°æ®ç±»å‹ã€é‡ç‚¹ã€‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%AD%97%E7%AC%A6%E4%B8%B2-String"><span class="toc-text">5.1 å­—ç¬¦ä¸²(String)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%88%97%E8%A1%A8-List"><span class="toc-text">5.2 åˆ—è¡¨(List)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E9%9B%86%E5%90%88-Set%EF%BC%8C%E4%B8%8D%E5%85%81%E8%AE%B8%E5%87%BA%E7%8E%B0%E9%87%8D%E5%A4%8D%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-text">5.3 é›†åˆ(Setï¼Œä¸å…è®¸å‡ºç°é‡å¤çš„å…ƒç´ )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88-sorted-set"><span class="toc-text">5.4 æœ‰åºé›†åˆ(sorted set)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E5%93%88%E5%B8%8C-Hash"><span class="toc-text">5.5 å“ˆå¸Œ(Hash)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-%E9%80%9A%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">5.6 é€šç”¨æ“ä½œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81Jedis%E7%9A%84%E4%BD%BF%E7%94%A8%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-text">å…­ã€Jedisçš„ä½¿ç”¨ã€é‡ç‚¹ã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81Redis%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91"><span class="toc-text">ä¸ƒã€Redisä¸­çš„äº‹åŠ¡ã€äº†è§£ã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB%E3%80%81Redis%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85%E4%B8%8E%E5%8F%91%E5%B8%83%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91"><span class="toc-text">å…«ã€Redisæ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒã€äº†è§£ã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D%E3%80%81Redis%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%A8%8B%E5%BA%8F%E7%95%8C%E9%9D%A2%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91"><span class="toc-text">ä¹ã€Rediså›¾å½¢åŒ–ç¨‹åºç•Œé¢ã€äº†è§£ã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E3%80%81Redis%E4%B8%AD%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-text">åã€Redisä¸­çš„æŒä¹…åŒ–ã€é‡ç‚¹ã€‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-RDB%EF%BC%88Redis-DataBase%EF%BC%89"><span class="toc-text">1.RDBï¼ˆRedis DataBaseï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-AOF%EF%BC%88Append-Of-File%EF%BC%89"><span class="toc-text">2.AOFï¼ˆAppend Of Fileï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%80%BB%E7%BB%93"><span class="toc-text">3.æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81Redis%E7%9A%84%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6-%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-text">åä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶ ã€é‡ç‚¹ã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81Redis%E7%9A%84%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-text">åäºŒã€Redisçš„å“¨å…µæ¨¡å¼ã€é‡ç‚¹ã€‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81Redis%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%EF%BC%8C%E5%87%BB%E7%A9%BF%EF%BC%8C%E9%9B%AA%E5%B4%A9%EF%BC%8C%E5%80%BE%E6%96%9C"><span class="toc-text">åä¸‰ã€Redisç¼“å­˜ç©¿é€ï¼Œå‡»ç©¿ï¼Œé›ªå´©ï¼Œå€¾æ–œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%EF%BC%88%E6%9F%A5%E4%B8%8D%E5%88%B0%EF%BC%89"><span class="toc-text">1.1 ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%EF%BC%88%E8%AE%BF%E9%97%AE%E9%87%8F%E5%A4%A7%EF%BC%8C%E7%BC%93%E5%AD%98%E8%BF%87%E6%9C%9F%EF%BC%89"><span class="toc-text">1.2 ç¼“å­˜å‡»ç©¿ï¼ˆè®¿é—®é‡å¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9"><span class="toc-text">1.3 ç¼“å­˜é›ªå´©</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E7%BC%93%E5%AD%98%E5%80%BE%E6%96%9C"><span class="toc-text">1.4 ç¼“å­˜å€¾æ–œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81Redis%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA"><span class="toc-text">åå››ã€Redisé›†ç¾¤æ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81Redis%E5%85%B6%E4%BB%96%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-text">åäº”ã€Rediså…¶ä»–å¸¸è§é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-key%E7%9A%84%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4%E5%88%B0%E4%BA%86%EF%BC%8CRedis%E4%BC%9A%E7%AB%8B%E5%8D%B3%E5%88%A0%E9%99%A4%E5%90%97%EF%BC%9F"><span class="toc-text">1.keyçš„ç”Ÿå­˜æ—¶é—´åˆ°äº†ï¼ŒRedisä¼šç«‹å³åˆ é™¤å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Redis%E7%9A%84%E6%B7%98%E6%B1%B0%E6%9C%BA%E5%88%B6"><span class="toc-text">2.Redisçš„æ·˜æ±°æœºåˆ¶</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="solitude st-map-line"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/50278.html" title="Rocky Linux"><img alt="Rocky Linux" src="https://s3.qjqq.cn/50/6615fa2d78f70.webp!color"></a><div class="content"><a class="title" href="/posts/50278.html" title="Rocky Linux">Rocky Linux</a><a class="article-recent_post_categories" href="/posts/50278.html">Linux</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/39676.html" title="WinServeræœåŠ¡å™¨ä¹‹é—´å¦‚ä½•æœ€å¿«æ‹·è´æ–‡ä»¶"><img alt="WinServeræœåŠ¡å™¨ä¹‹é—´å¦‚ä½•æœ€å¿«æ‹·è´æ–‡ä»¶" src="https://s3.qjqq.cn/50/6615fa2d74721.webp!color"></a><div class="content"><a class="title" href="/posts/39676.html" title="WinServeræœåŠ¡å™¨ä¹‹é—´å¦‚ä½•æœ€å¿«æ‹·è´æ–‡ä»¶">WinServeræœåŠ¡å™¨ä¹‹é—´å¦‚ä½•æœ€å¿«æ‹·è´æ–‡ä»¶</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/27080.html" title="WinServer2019ä¿®æ”¹è¿œç¨‹ç«¯å£å·"><img alt="WinServer2019ä¿®æ”¹è¿œç¨‹ç«¯å£å·" src="https://s3.qjqq.cn/50/6615fcfb15e85.webp!color"></a><div class="content"><a class="title" href="/posts/27080.html" title="WinServer2019ä¿®æ”¹è¿œç¨‹ç«¯å£å·">WinServer2019ä¿®æ”¹è¿œç¨‹ç«¯å£å·</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/16524.html" title="CentOS 7.9ä¿®æ”¹è¿œç¨‹ç«¯å£å·è¸©å‘"><img alt="CentOS 7.9ä¿®æ”¹è¿œç¨‹ç«¯å£å·è¸©å‘" src="https://s3.qjqq.cn/50/6615fa2c51107.webp!color"></a><div class="content"><a class="title" href="/posts/16524.html" title="CentOS 7.9ä¿®æ”¹è¿œç¨‹ç«¯å£å·è¸©å‘">CentOS 7.9ä¿®æ”¹è¿œç¨‹ç«¯å£å·è¸©å‘</a><a class="article-recent_post_categories" href="/posts/16524.html">CentOS</a></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/47132.html" title="å±€åŸŸç½‘å…±äº«æ‰“å°æœºå‡ºç°0x0000011bé”™è¯¯è§£å†³æ–¹å¼"><img alt="å±€åŸŸç½‘å…±äº«æ‰“å°æœºå‡ºç°0x0000011bé”™è¯¯è§£å†³æ–¹å¼" src="https://s3.qjqq.cn/50/6615fcf9e16cf.webp!color"></a><div class="content"><a class="title" href="/posts/47132.html" title="å±€åŸŸç½‘å…±äº«æ‰“å°æœºå‡ºç°0x0000011bé”™è¯¯è§£å†³æ–¹å¼">å±€åŸŸç½‘å…±äº«æ‰“å°æœºå‡ºç°0x0000011bé”™è¯¯è§£å†³æ–¹å¼</a></div></div></div></div></div></div></main><footer id="footer"><div id="st-footer-bar"><div class="footer-logo"><span class="solitude">Couture's Blogs</span></div><div class="footer-bar-description">æ¥è‡ªCouture's Blog - nullçš„æ–‡ç« </div><a class="footer-bar-link" href="/">äº†è§£æ›´å¤š</a></div><div id="footer_deal"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/CoutureOne" title="Github"><i class="solitude st-github-line"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://mail.google.com/mail/" title="Mail"><i class="solitude st-mail-line"></i></a><div class="nolazyload footer_mini_logo" id="footer_mini_logo" title="è¿”å›é¡¶éƒ¨" onclick="sco.toTop()"><img src="/img/pwa/favicon.ico" alt="è¿”å›é¡¶éƒ¨"></div><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/523459350" title="Bilibili"><i class="solitude st-bilibili-line"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.douyin.com/user/MS4wLjABAAAAfA065gUa_TD45hnpKZvlQZPRCaiVNTcYdSvWJSqhSJE" title="æŠ–éŸ³"><i class="solitude st-douyin-fill"></i></a></div><div id="st-footer"><div class="footer-group"><h3 class="footer-title">å¯¼èˆª</h3><div class="footer-links"><a class="footer-item" href="/archives/" title="å½’æ¡£">å½’æ¡£</a><a class="footer-item" href="/categories/" title="åˆ†ç±»">åˆ†ç±»</a><a class="footer-item" href="/tags/" title="æ ‡ç­¾">æ ‡ç­¾</a></div></div><div class="footer-group"><h3 class="footer-title">æœåŠ¡</h3><div class="footer-links"><a class="footer-item" target="_blank" rel="noopener" href="https://aliyun.com/" title="é˜¿é‡Œäº‘">é˜¿é‡Œäº‘</a><a class="footer-item" target="_blank" rel="noopener" href="https://v6.51.la/" title="51laç»Ÿè®¡">51laç»Ÿè®¡</a><a class="footer-item" target="_blank" rel="noopener" href="https://tongji.baidu.com/" title="ç™¾åº¦ç»Ÿè®¡">ç™¾åº¦ç»Ÿè®¡</a></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div class="copyright">Â© 2020 - 2024 By&nbsp;<a class="footer-bar-link" href="/">Couture</a></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/valor-x/hexo-theme-solitude" title="ä¸»é¢˜">ä¸»é¢˜</a><a class="footer-bar-link cc" href="/null" aria-label="copyright"><i class="solitude st-copyright-line"></i><i class="solitude st-creative-commons-by-line"></i><i class="solitude st-creative-commons-nc-line"></i><i class="solitude st-creative-commons-nd-line"></i></a></div></div></div><div class="comment-barrage needEndHide"></div></footer></div><div><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/main.min.js"></script><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/utils.min.js"></script><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/third_party/waterfall.min.js"></script><script src="https://cdn.staticfile.net/pjax/0.2.8/pjax.min.js"></script><script src="https://cdn.staticfile.net/blueimp-md5/2.19.0/js/md5.min.js"></script><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/third_party/universe.min.js"></script><script>dark()</script><script src="https://cdn.staticfile.net/node-snackbar/0.1.16/snackbar.min.js"></script><script src="https://cdn.staticfile.net/fancyapps-ui/5.0.35/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.staticfile.net/Swiper/11.0.5/swiper-bundle.min.js"></script><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/covercolor/local.min.js"></script><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/commentBarrage/valine.min.js"></script><script src="https://cdn.staticfile.net/pace/1.2.4/pace.min.js"></script><script src="/js/custom.js"></script><link rel="stylesheet" href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/Swiper/8.0.6/swiper-bundle.min.css"><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/Swiper/8.0.6/swiper-bundle.min.js"></script></div><div id="js-pjax"><script async src="https://cdn.staticfile.net/busuanzi/2.3.0/bsz.pure.mini.min.js"></script><script id="config-diff">var PAGE_CONFIG={is_post:!0,is_page:!1,is_home:!1,page:"post",toc:!0,comment:!0}</script></div><script>window.addEventListener("load",(()=>{const e=e=>{if(""===e)return e;return(e=[{regex:/<img.*?src="(.*?)"?[^\>]+>/gi,replacement:"[Image]"},{regex:/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,replacement:"[URL]"},{regex:/```[\s\S]*?```/g,replacement:"[Code]"},{regex:/<[^>]+>/g,replacement:""}].reduce(((e,{regex:t,replacement:a})=>e.replace(t,a)),e)).length>150?e.substring(0,150)+"...":e},t=document.querySelector("#card-newest-comments .aside-list"),a=async()=>{try{const t={method:"GET",headers:{"X-LC-Id":"aVReZaifAnr7vskgWFexgbCb-gzGzoHsz","X-LC-Key":"1DB6cCOWB3GgFDbDaAzm9Ogc","Content-Type":"application/json"}},a=await fetch("https://avrezaif.lc-cn-n1-shared.com/1.1/classes/Comment?limit=8&order=-createdAt",t),c=await a.json();window.res=c;const s=c.results.map((t=>({content:e(t.comment),avatar:"https://cravatar.cn/avatar/"+md5(t.mail.toLowerCase()),nick:t.nick,url:t.url+"#"+t.objectId,date:t.updatedAt||t.createdAt})));saveToLocal.set("valine-newest-comment",JSON.stringify(s),421e3/1440),n(s)}catch(e){console.error(e),t.textContent="æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®ã€‚"}},n=e=>{document.querySelector("#card-newest-comments .aside-list").innerHTML=e.length?e.map((e=>`\n                    <div class='aside-list-item'>\n                      <a onclick='pjax.loadUrl("${e.url}")' class='thumbnail'>\n                        <img src='${e.avatar}' alt='${e.nick}'>\n                        <div class='name'><span>${e.nick}</span></div>\n                      </a>\n                      <div class='content'>\n                        <a class='comment' onclick='pjax.loadUrl("${e.url}")'>${e.content}</a>\n                        <time class="datetime" datetime="${e.date}"></time>\n                      </div>\n                    </div>\n                  `)).join(""):"æ²¡æœ‰è¯„è®º",window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(),sco&&sco.changeTimeFormat(document.querySelectorAll(".aside-list-item time"))};(()=>{const e=saveToLocal.get("valine-newest-comment");e?n(JSON.parse(e)):a()})()}))</script><script>let pjaxSelectors=["title","#body-wrap","#site-config",'meta[name="description"]',"#js-pjax",'meta[property^="og:"]'];const pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)})),document.addEventListener("pjax:complete",(()=>{window.refreshFn()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script>initTheme=()=>{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;const t=saveToLocal.get("theme");if(void 0===t){const t=e?"dark":"light";document.documentElement.setAttribute("data-theme",t)}else document.documentElement.setAttribute("data-theme",t)},initTheme()</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="solitude st-close-fill"></i></button></nav><div class="search-wrap"><div class="search-box"><input class="search-box-input" id="search-input" type="text" autocomplete="off" spellcheck="false" autocorrect="off" autocapitalize="off" placeholder="è¾“å…¥å…³é”®è¯å¿«é€ŸæŸ¥æ‰¾"></div><div id="search-results"><div id="search-hits"></div></div><div id="search-pagination"></div><div id="search-tips"></div></div></div><div id="search-mask"></div></div><script src="https://cdn.staticfile.net/hexo-theme-solitude/1.7.12/js/search/local.min.js"></script></body></html><script>const posts=["posts/50278.html","posts/39676.html","posts/27080.html","posts/16524.html","posts/47132.html","posts/23239.html","posts/47989.html","posts/25680.html","posts/37230.html","posts/57178.html","posts/65189.html","posts/475.html","posts/5232.html","posts/49547.html","posts/64385.html","posts/55427.html","posts/48230.html","posts/24427.html","posts/24202.html","posts/2647.html","posts/32531.html","posts/35045.html","posts/52684.html","posts/2952.html","posts/10164.html","posts/35350.html","posts/28465.html","posts/42315.html","posts/13213.html","posts/969.html","posts/57106.html","posts/58156.html","posts/54987.html","posts/46537.html","posts/46395.html","posts/33213.html","posts/60291.html","posts/30745.html","posts/48204.html","posts/655.html","posts/55611.html","posts/9259.html","posts/46161.html","posts/9355.html","posts/31435.html","posts/20039.html","posts/62191.html","posts/27273.html","posts/33708.html","posts/64556.html","posts/42050.html","posts/13368.html","posts/24491.html"];function toRandomPost(){pjax.loadUrl("/"+posts[Math.floor(Math.random()*posts.length)])}</script>